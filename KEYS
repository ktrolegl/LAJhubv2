-- LAJ HUB Key System - Modern UI
-- Custom UI key verification with GitHub tracking

-- Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui")

-- Variables
local Player = Players.LocalPlayer
local Mouse = Player:GetMouse()

-- Configuration (edit these)
local VALID_KEYS = {
    "LAJSPECIAL",
    "LAJULTRA",
    "LAJEXCLUSIVE",
    "LAJPREMIUM", 
    "LAJELITE"
}

-- 200 pre-generated keys for direct use (no random key generation)
local GENERATED_KEYS = {
 "LAJv86mKVajOesxHUB", "LAJu38RP423vQWOHUB", "LAJiTzvwQbCMViyHUB", 
    "LAJMkgx8RAzsf57HUB", "LAJywB8GgPugl5yHUB", "LAJ1tbNRXjmsgp8HUB", 
    "LAJXnXoEj1oJ7xhHUB", "LAJ8ltKnWdAnDTJHUB", "LAJq6480b71p6mpHUB", 
    "LAJahkbDDUTu2l8HUB", "LAJG8XthEI0mHyaHUB", "LAJ0Di55CtWoI1LHUB", 
    "LAJlFBZnlc1XXuyHUB", "LAJtHZZU1bUg3F9HUB", "LAJG3Ydgb4i7IJOHUB", 
    "LAJVDCLUyWVdr3PHUB", "LAJ15rEBere2nONHUB", "LAJNWOhlh5LT1GuHUB", 
    "LAJH3BAaAZFnC71HUB", "LAJHsL5TphVoR1wHUB", "LAJ1iyuGqCWRyODHUB", 
    "LAJlyOYFT0vPbcDHUB", "LAJ64U4Z5qrecOuHUB", "LAJC1l2lWf8ND49HUB", 
    "LAJ6w3fGunbg1V0HUB", "LAJWY2gehhmJatLHUB", "LAJncMj3TctTdZnHUB", 
    "LAJblMjcP0BAh8BHUB", "LAJnq9IHPvB4iCQHUB", "LAJnmfYaBzJ8oHoHUB", 
    "LAJWYFIzb9JBBPtHUB", "LAJ6nmyKIahQHdLHUB", "LAJuX6297XnBaiLHUB", 
    "LAJCgLlQUsn7xoHHUB", "LAJP7gceaftfJidHUB", "LAJ8aV8zy7W1ZlzHUB", 
    "LAJL8P2DJZe2nTpHUB", "LAJJVdZNTAGfwwVHUB", "LAJoksuIwaSSoGiHUB", 
    "LAJiJVyZiQjENglHUB", "LAJsPp0JagDInxKHUB", "LAJmTMuKdHmTXzQHUB", 
    "LAJOXGLxg4atnioHUB", "LAJBChF02SosU9PHUB", "LAJtcFpDa4QKpS4HUB", 
    "LAJeLAN6EUqvRfaHUB", "LAJuAEhXtWjSKzPHUB", "LAJu3A9nmJGYPidHUB", 
    "LAJbQLsaD7JR5ziHUB", "LAJDqiNVWIGP5FJHUB", "LAJ214KKBZ4dBqwHUB", 
    "LAJEzaeqPbtJSgIHUB", "LAJYGNgeOzM4SbUHUB", "LAJNd10VYsLdceMHUB", 
    "LAJ2AupabUVgN2QHUB", "LAJ0IEiY5en7XrGHUB", "LAJssXOvlWSOjT4HUB", 
    "LAJ7Qyym1g9SKP9HUB", "LAJ6Ylc6bOnqW6VHUB", "LAJma01ZUCMfcekHUB", 
    "LAJjl2V8IsfacDcHUB", "LAJ0rNYs9TRj3k9HUB", "LAJyTa2EkcrV4Y3HUB", 
    "LAJ58mlGpPTM2wuHUB", "LAJuGNW7mDdasmeHUB", "LAJsXr7Ek8l7dT0HUB", 
    "LAJ8abzutIMRiE4HUB", "LAJk4fNCBmRfWRdHUB", "LAJyNe2A8pA8o9xHUB", 
    "LAJiEP3qMmrzWkzHUB", "LAJNWGWgPd0KSW2HUB", "LAJZxUIlUhnbBivHUB", 
    "LAJlwGiI8NB6axRHUB", "LAJI4dVREz5BUF4HUB", "LAJdRCaz5PTEMq8HUB", 
    "LAJLxzlAevGn9VlHUB", "LAJieOxQH32rqfaHUB", "LAJoMOoGZps6JvMHUB", 
    "LAJheLBJqWfJvVLHUB", "LAJj0oavC10REUXHUB", "LAJNBFJi94c94VoHUB", 
    "LAJG1oj5XkoIgBLHUB", "LAJIsHUxJoygRJ8HUB", "LAJIPP8hntzLmzMHUB", 
    "LAJFeIOgT8bC8ZWHUB", "LAJw36ZrWWS9NzDHUB", "LAJRqpyVhGqNeKKHUB", 
    "LAJpJcfclR2AZ8wHUB", "LAJ2nGgTW5m3Dw7HUB", "LAJ7XulZzAeStcIHUB", 
    "LAJllfnE8TRjtEAHUB", "LAJ1RD3y5dMCAzPHUB", "LAJArHCEsBSQQnxHUB", 
    "LAJDfCgbMp3PWF8HUB", "LAJpaMMgChCOsgGHUB", "LAJypyyRFCKbWiGHUB", 
    "LAJpNwICXPcRwUVHUB", "LAJs8cfss9NCruYHUB", "LAJENozo2rmyudpHUB", 
    "LAJ1ZQ0NOLldegZHUB",
    -- Additional 100 Keys
    "LAJb3PpXsZjZHUB", "LAJVbILUT7ABqHUB", "LAJMtvTbGVWHUB", 
    "LAJOT4kG23NLtHUB", "LAJq8rw1RPHbGuDIMHUB", "LAJe1WRnyKPnsItG41HUB", 
    "LAJ0KmcwCyi80SMcHUB", "LAJCK0fY9fQ240HUB", "LAJFIPKoBr0h00XHUB", 
    "LAJFCdF5e3K97XHUB", "LAJbYx7aHpT7DMOHUB", "LAJb0nh6Mys5HdtHUB", 
    "LAJ0jUzR3TXBR0dHUB", "LAJh8fPD7kbGQxXHUB", "LAJYYRDd2VQd6pHUB", 
    "LAJlIpSRgwEYSfuHUB", "LAJ1WmqDcbv8qUYHUB", "LAJOp5tXlm40FkgHUB", 
    "LAJPafq2KcuHl5zHUB", "LAJD2yC5jPFnM8XHUB", "LAJmZjwJgwzb0MdHUB", 
    "LAJv47KPJ8G15sKHUB", "LAJDwTCsPVpFkiaHUB", "LAJwHcszLWQoJiGHUB", 
    "LAJGJfSVlmD9o1RHUB", "LAJyeHE4LQYPFKrHUB", "LAJNbzA2y6QNk8pHUB", 
    "LAJxwI5yyjFXlUGHUB", "LAJhDvCPzrdwblBHUB", "LAJxZN5EXLXdF99HUB", 
    "LAJyLjKVCJhxTpFHUB", "LAJvytXAD5UD5eKHUB", "LAJoJfEJVH23GnrHUB", 
    "LAJEQGKOFpQGCfKHUB", "LAJlrZLxgqPpIJUHUB", "LAJtlJAWuTNdFmHHUB", 
    "LAJGTkrpBvEcJ2aHUB", "LAJ3ylZTBb4nQh3HUB", "LAJmEPl4qw8y8xHUB", 
    "LAJqEVeYoGoBvE7HUB", "LAJnWl8OQjMsVbIHUB", "LAJmKdK29BLQu6cHUB", 
    "LAJaOWFWa6D50ZAHUB", "LAJpZ32b5sO4AEHHUB", "LAJ4KIoURNwmcELHUB", 
    "LAJ4OU2F2o1vptNHUB", "LAJGg2HrGhEpJLQHUB", "LAJDe8VZwPXu8gBHUB", 
    "LAJ1VJcmFhgESlNHUB", "LAJl6l8R4dFGfjEHUB", "LAJv0XavwDNgNjvHUB", 
    "LAJJiRkd865HvGCHUB", "LAJhS20hIrpQkuBHUB", "LAJKRfECgXH3UBXHUB", 
    "LAJ5hQXfkjDqYqkHUB", "LAJihYZ63xKaXIaHUB", "LAJiuBk7B1p8lKtHUB", 
    "LAJnVdqNxBJd1MTHUB", "LAJh1b2W0xR5tlfHUB", "LAJ3WLNnmK1G1VXHUB", 
    "LAJ2MvsvtAGIfIHHUB", "LAJNc41jL2VQJTHHUB", "LAJQb0zv89iqJpJHUB", 
    "LAJvngVlE4STnH9HUB", "LAJv7SQpmkHr7gRHUB", "LAJ6EJaRjJRrLB4HUB", 
    "LAJBMTrbhHMpJUYHUB", "LAJhimwXARXqF3fHUB", "LAJzMOLcZ6lhGCaHUB", 
    "LAJzF0hLYSKDd12HUB", "LAJlrr4RlOJPcEVHUB", "LAJ13O8YYCNtCEeHUB", 
    "LAJGnkOl3y1YLNeHUB", "LAJKl8jwm3Jq2IdHUB", "LAJdQcbE30WM4F6HUB", 
    "LAJcuNuIUvV5GJMHUB", "LAJr7JCVaScOHQqHUB", "LAJTvA2DeLSlvPnHUB", 
    "LAJr7FX3UGYBKwOHUB", "LAJfk2ERy7swnGJHUB", "LAJeY3Y49FTnAE5HUB", 
    "LAJCqkkuF6Sh2UiHUB", "LAJjUPnEI2hkXDIHUB", "LAJQAKsxrAPnJVfHUB", 
    "LAJFnGdUXkTEmLjHUB", "LAJQjAA2PCXY50LHUB", "LAJGf2aRhM2lC76HUB", 
    "LAJjvCDCTOZYt5GHUB", "LAJBOp25ybIJZb3HUB", "LAJ0vwqvuVqFpVSHUB", 
    "LAJjn5Hg2Jid0EaHUB", "LAJ2O95zMUxYj4XHUB", "LAJOapTSv80hEKkHUB", 
    "LAJ9EMWyCEI1HPUHUB", "LAJUMnLNUdNbTHHHUB", "LAJ0ZXLNAJZXtX9HUB"
}

-- Discord server link
local DISCORD_LINK = "https://discord.gg/4mgdcfvAJU"
-- Note: In the Discord server, users can type "key" to get a key automatically

-- Discord webhook for tracking (reversed for obfuscation)
local WEBHOOK_URL = string.reverse("qkUQ9v9YFyBFC9wYSzQVz_xU0lG1yvrSM1wVHh0o9yQlH0vAjxwvFFvF78M7yi1BHDPyR4l".."/".."198846810816959531/moc.drocsid//:sptth")
-- The webhook URL is split and reversed for better obfuscation

-- GitHub script URL (where your main script is hosted)
local SCRIPT_URL = "https://raw.githubusercontent.com/ktrolegl/LAJhubv2/refs/heads/main/testingv2"

-- Request function for different executors
local request = syn and syn.request or http and http.request or http_request or request or httprequest

-- UI Colors
local Theme = {
    Background = Color3.fromRGB(35, 35, 35),
    DarkBackground = Color3.fromRGB(25, 25, 25),
    TextColor = Color3.fromRGB(255, 255, 255),
    AccentColor = Color3.fromRGB(65, 105, 225),
    ErrorColor = Color3.fromRGB(220, 60, 60),
    SuccessColor = Color3.fromRGB(60, 220, 60)
}

-- Enhanced function to log key usage via webhook with more details
local function logKeyUsage(key, success)
    local success_attempt, error_message = pcall(function()
        -- Determine key type based on format and source
        local isDiscordBotFormat = string.match(key, "^LAJ.*HUB$") and string.len(key) >= 9
        local isPreGeneratedKey = false
        
        -- Check if it's in the pre-generated key list
        for _, genKey in ipairs(GENERATED_KEYS) do
            if key == genKey then
                isPreGeneratedKey = true
                break
            end
        end
        
        -- Get device info
        local deviceInfo = ""
        if game:GetService("UserInputService").TouchEnabled and not game:GetService("UserInputService").KeyboardEnabled then
            deviceInfo = "Mobile"
        elseif game:GetService("UserInputService").KeyboardEnabled then
            deviceInfo = "PC"
        else
            deviceInfo = "Console/Other"
        end
        
        -- Key type field
        local keyType = "Unknown"
        if table.find(VALID_KEYS, key) then
            keyType = "Standard Key"
        elseif isPreGeneratedKey then
            keyType = "Pre-generated Key"
        elseif isDiscordBotFormat and not isPreGeneratedKey then
            keyType = "Discord Bot Key"
        end
        
        request({
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode({
                ["content"] = "",
                ["embeds"] = {{
                    ["title"] = success and "LAJ HUB Key Used Successfully" or "Failed Key Attempt",
                    ["color"] = success and 65280 or 16711680,
                    ["fields"] = {
                        {
                            ["name"] = "User",
                            ["value"] = "```" .. Player.Name .. "```",
                            ["inline"] = true
                        },
                        {
                            ["name"] = "User ID",
                            ["value"] = "```" .. tostring(Player.UserId) .. "```",
                            ["inline"] = true
                        },
                        {
                            ["name"] = "Key Used",
                            ["value"] = "```" .. key .. "```",
                            ["inline"] = true
                        },
                        {
                            ["name"] = "Key Type",
                            ["value"] = "```" .. keyType .. "```",
                            ["inline"] = true
                        },
                        {
                            ["name"] = "Game",
                            ["value"] = "```" .. game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name .. "```",
                            ["inline"] = true
                        },
                        {
                            ["name"] = "Game ID",
                            ["value"] = "```" .. tostring(game.PlaceId) .. "```",
                            ["inline"] = true
                        },
                        {
                            ["name"] = "Device",
                            ["value"] = "```" .. deviceInfo .. "```",
                            ["inline"] = true
                        },
                        {
                            ["name"] = "Executor",
                            ["value"] = "```" .. (identifyexecutor and identifyexecutor() or "Unknown") .. "```",
                            ["inline"] = true
                        }
                    },
                    ["footer"] = {
                        ["text"] = "Key Usage Timestamp: " .. os.date("%Y-%m-%d %H:%M:%S")
                    }
                }}
            })
        })
    end)
    
    if not success_attempt then
        warn("Failed to send webhook: " .. tostring(error_message))
    end
end

-- Enhanced key verification system for Discord bot integration
local function verifyKey(key)
    -- Safety check for nil or empty key
    if not key or key == "" then
        return false
    end
    
    -- 1. First check against pre-defined valid keys (fastest check)
    for _, validKey in ipairs(VALID_KEYS) do
        if key == validKey then
            return true
        end
    end
    
    -- 2. Check against pre-generated keys list
    for _, validKey in ipairs(GENERATED_KEYS) do
        if key == validKey then
            return true
        end
    end
    
    -- 3. Format validation for Discord bot generated keys
    -- Bot keys format: LAJ[random characters]HUB
    if string.match(key, "^LAJ.*HUB$") then
        local keyLength = string.len(key)
        
        -- Valid Discord bot keys must be at least 9 chars (LAJ + X + HUB)
        -- and should be reasonable in length (not overly long)
        if keyLength >= 9 and keyLength <= 30 then
            -- Additional validation rules for bot-generated keys
            -- Ensure there's at least 3 characters between LAJ and HUB
            local middlePart = string.sub(key, 4, -4)
            if #middlePart >= 3 then
                -- Check that the middle part contains at least one alphanumeric character
                if string.match(middlePart, "[A-Za-z0-9]") then
                    return true
                end
            end
        end
    end
    
    return false
end

-- Function to load the main script
local function loadMainScript()
    local success, error_message = pcall(function()
        loadstring(game:HttpGet(SCRIPT_URL))()
    end)
    
    if not success then
        warn("Failed to load main script: " .. tostring(error_message))
    end
end

-- Creating UI Elements
local function createKeySystemUI()
    -- Check if UI already exists and remove it
    if CoreGui:FindFirstChild("LAJHubKeySystem") then
        CoreGui:FindFirstChild("LAJHubKeySystem"):Destroy()
    end
    
    -- Main ScreenGui
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "LAJHubKeySystem"
    ScreenGui.Parent = CoreGui
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- Main Frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 400, 0, 300) -- Slightly increased height for Discord button
    MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
    MainFrame.BackgroundColor3 = Theme.Background
    MainFrame.BorderSizePixel = 0
    MainFrame.Parent = ScreenGui
    
    -- Apply corner radius
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 6)
    MainCorner.Parent = MainFrame
    
    -- Title Bar
    local TitleBar = Instance.new("Frame")
    TitleBar.Name = "TitleBar"
    TitleBar.Size = UDim2.new(1, 0, 0, 30)
    TitleBar.Position = UDim2.new(0, 0, 0, 0)
    TitleBar.BackgroundColor3 = Theme.DarkBackground
    TitleBar.BorderSizePixel = 0
    TitleBar.Parent = MainFrame
    
    local TitleCorner = Instance.new("UICorner")
    TitleCorner.CornerRadius = UDim.new(0, 6)
    TitleCorner.Parent = TitleBar
    
    -- Fix corners
    local TitleCornerFix = Instance.new("Frame")
    TitleCornerFix.Name = "TitleCornerFix"
    TitleCornerFix.Size = UDim2.new(1, 0, 0.5, 0)
    TitleCornerFix.Position = UDim2.new(0, 0, 0.5, 0)
    TitleCornerFix.BackgroundColor3 = Theme.DarkBackground
    TitleCornerFix.BorderSizePixel = 0
    TitleCornerFix.Parent = TitleBar
    
    -- Make the title bar draggable
    local dragging
    local dragInput
    local dragStart
    local startPos
    
    local function updateInput(input)
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
    
    TitleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    TitleBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            updateInput(input)
        end
    end)
    
    -- Title
    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Name = "TitleLabel"
    TitleLabel.Size = UDim2.new(1, -60, 1, 0)
    TitleLabel.Position = UDim2.new(0, 10, 0, 0)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Text = "LAJ HUB - Key System"
    TitleLabel.TextColor3 = Theme.TextColor
    TitleLabel.TextSize = 16
    TitleLabel.Font = Enum.Font.SourceSansBold
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.Parent = TitleBar
    
    -- Close Button
    local CloseButton = Instance.new("TextButton")
    CloseButton.Name = "CloseButton"
    CloseButton.Size = UDim2.new(0, 24, 0, 24)
    CloseButton.Position = UDim2.new(1, -28, 0, 3)
    CloseButton.BackgroundColor3 = Theme.ErrorColor
    CloseButton.Text = "×"
    CloseButton.TextColor3 = Theme.TextColor
    CloseButton.TextSize = 18
    CloseButton.Font = Enum.Font.SourceSansBold
    CloseButton.Parent = TitleBar
    
    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 4)
    CloseCorner.Parent = CloseButton
    
    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
    
    -- Minimize Button
    local MinimizeButton = Instance.new("TextButton")
    MinimizeButton.Name = "MinimizeButton"
    MinimizeButton.Size = UDim2.new(0, 24, 0, 24)
    MinimizeButton.Position = UDim2.new(1, -56, 0, 3)
    MinimizeButton.BackgroundColor3 = Theme.Background
    MinimizeButton.Text = "-"
    MinimizeButton.TextColor3 = Theme.TextColor
    MinimizeButton.TextSize = 18
    MinimizeButton.Font = Enum.Font.SourceSansBold
    MinimizeButton.Parent = TitleBar
    
    local MinimizeCorner = Instance.new("UICorner")
    MinimizeCorner.CornerRadius = UDim.new(0, 4)
    MinimizeCorner.Parent = MinimizeButton
    
    -- Tab system
    local TabContainer = Instance.new("Frame")
    TabContainer.Name = "TabContainer"
    TabContainer.Size = UDim2.new(0, 80, 1, -30)
    TabContainer.Position = UDim2.new(0, 0, 0, 30)
    TabContainer.BackgroundColor3 = Theme.DarkBackground
    TabContainer.BorderSizePixel = 0
    TabContainer.Parent = MainFrame
    
    local TabContainerCorner = Instance.new("UICorner")
    TabContainerCorner.CornerRadius = UDim.new(0, 6)
    TabContainerCorner.Parent = TabContainer
    
    -- Fix tab container corners
    local TabCornerFix = Instance.new("Frame")
    TabCornerFix.Name = "TabCornerFix"
    TabCornerFix.Size = UDim2.new(0.5, 0, 1, 0)
    TabCornerFix.Position = UDim2.new(0.5, 0, 0, 0)
    TabCornerFix.BackgroundColor3 = Theme.DarkBackground
    TabCornerFix.BorderSizePixel = 0
    TabCornerFix.Parent = TabContainer
    
    -- Main Tab
    local MainTab = Instance.new("TextButton")
    MainTab.Name = "MainTab"
    MainTab.Size = UDim2.new(1, 0, 0, 30)
    MainTab.Position = UDim2.new(0, 0, 0, 10)
    MainTab.BackgroundColor3 = Theme.AccentColor
    MainTab.Text = "Tab 1"
    MainTab.TextColor3 = Theme.TextColor
    MainTab.TextSize = 14
    MainTab.Font = Enum.Font.SourceSansBold
    MainTab.BorderSizePixel = 0
    MainTab.Parent = TabContainer
    
    local MainTabCorner = Instance.new("UICorner")
    MainTabCorner.CornerRadius = UDim.new(0, 4)
    MainTabCorner.Parent = MainTab
    
    -- Content Area
    local ContentArea = Instance.new("Frame")
    ContentArea.Name = "ContentArea"
    ContentArea.Size = UDim2.new(1, -90, 1, -40)
    ContentArea.Position = UDim2.new(0, 85, 0, 35)
    ContentArea.BackgroundTransparency = 1
    ContentArea.BorderSizePixel = 0
    ContentArea.Parent = MainFrame
    
    -- Key input elements
    local KeyLabel = Instance.new("TextLabel")
    KeyLabel.Name = "KeyLabel"
    KeyLabel.Size = UDim2.new(1, 0, 0, 20)
    KeyLabel.Position = UDim2.new(0, 0, 0, 10)
    KeyLabel.BackgroundTransparency = 1
    KeyLabel.Text = "Enter your key:"
    KeyLabel.TextColor3 = Theme.TextColor
    KeyLabel.TextSize = 14
    KeyLabel.Font = Enum.Font.SourceSans
    KeyLabel.TextXAlignment = Enum.TextXAlignment.Left
    KeyLabel.Parent = ContentArea
    
    local KeyInput = Instance.new("TextBox")
    KeyInput.Name = "KeyInput"
    KeyInput.Size = UDim2.new(1, 0, 0, 35)
    KeyInput.Position = UDim2.new(0, 0, 0, 35)
    KeyInput.BackgroundColor3 = Theme.DarkBackground
    KeyInput.PlaceholderText = "Enter your LAJ HUB key here..."
    KeyInput.PlaceholderColor3 = Color3.fromRGB(120, 120, 120)
    KeyInput.Text = ""
    KeyInput.TextColor3 = Theme.TextColor
    KeyInput.TextSize = 14
    KeyInput.Font = Enum.Font.SourceSans
    KeyInput.BorderSizePixel = 0
    KeyInput.ClearTextOnFocus = false
    KeyInput.Parent = ContentArea
    
    local KeyInputCorner = Instance.new("UICorner")
    KeyInputCorner.CornerRadius = UDim.new(0, 4)
    KeyInputCorner.Parent = KeyInput
    
    -- Button for key verification
    local VerifyButton = Instance.new("TextButton")
    VerifyButton.Name = "VerifyButton"
    VerifyButton.Size = UDim2.new(1, 0, 0, 35)
    VerifyButton.Position = UDim2.new(0, 0, 0, 80)
    VerifyButton.BackgroundColor3 = Theme.AccentColor
    VerifyButton.Text = "Verify Key"
    VerifyButton.TextColor3 = Theme.TextColor
    VerifyButton.TextSize = 16
    VerifyButton.Font = Enum.Font.SourceSansBold
    VerifyButton.BorderSizePixel = 0
    VerifyButton.Parent = ContentArea
    
    local VerifyCorner = Instance.new("UICorner")
    VerifyCorner.CornerRadius = UDim.new(0, 4)
    VerifyCorner.Parent = VerifyButton
    
    -- Status label
    local StatusLabel = Instance.new("TextLabel")
    StatusLabel.Name = "StatusLabel"
    StatusLabel.Size = UDim2.new(1, 0, 0, 20)
    StatusLabel.Position = UDim2.new(0, 0, 0, 125)
    StatusLabel.BackgroundTransparency = 1
    StatusLabel.Text = ""
    StatusLabel.TextColor3 = Theme.TextColor
    StatusLabel.TextSize = 14
    StatusLabel.Font = Enum.Font.SourceSans
    StatusLabel.Parent = ContentArea
    
    -- Discord information
    local DiscordLabel = Instance.new("TextLabel")
    DiscordLabel.Name = "DiscordLabel"
    DiscordLabel.Size = UDim2.new(1, 0, 0, 20)
    DiscordLabel.Position = UDim2.new(0, 0, 0, 155)
    DiscordLabel.BackgroundTransparency = 1
    DiscordLabel.Text = "Need a key? Join our Discord & type 'key':"
    DiscordLabel.TextColor3 = Theme.TextColor
    DiscordLabel.TextSize = 14
    DiscordLabel.Font = Enum.Font.SourceSans
    DiscordLabel.TextXAlignment = Enum.TextXAlignment.Left
    DiscordLabel.Parent = ContentArea
    
    -- Discord Button
    local DiscordButton = Instance.new("TextButton")
    DiscordButton.Name = "DiscordButton"
    DiscordButton.Size = UDim2.new(1, 0, 0, 35)
    DiscordButton.Position = UDim2.new(0, 0, 0, 180)
    DiscordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242) -- Discord color
    DiscordButton.Text = "Join Discord & Type 'key'"
    DiscordButton.TextColor3 = Theme.TextColor
    DiscordButton.TextSize = 16
    DiscordButton.Font = Enum.Font.SourceSansBold
    DiscordButton.BorderSizePixel = 0
    DiscordButton.Parent = ContentArea
    
    local DiscordCorner = Instance.new("UICorner")
    DiscordCorner.CornerRadius = UDim.new(0, 4)
    DiscordCorner.Parent = DiscordButton
    
    DiscordButton.MouseButton1Click:Connect(function()
        setclipboard(DISCORD_LINK)
        StatusLabel.Text = "Discord link copied to clipboard!"
        StatusLabel.TextColor3 = Theme.SuccessColor
        
        -- Create a notification
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Discord Link Copied",
            Text = "Join & type 'key' to get your key!",
            Duration = 5
        })
    end)
    
    -- Toggle (like in the image)
    local ToggleLabel = Instance.new("TextLabel")
    ToggleLabel.Name = "ToggleLabel"
    ToggleLabel.Size = UDim2.new(0.6, 0, 0, 20)
    ToggleLabel.Position = UDim2.new(0, 0, 0, 225)
    ToggleLabel.BackgroundTransparency = 1
    ToggleLabel.Text = "This is a toggle!"
    ToggleLabel.TextColor3 = Theme.TextColor
    ToggleLabel.TextSize = 14
    ToggleLabel.Font = Enum.Font.SourceSans
    ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
    ToggleLabel.Parent = ContentArea
    
    local ToggleButton = Instance.new("Frame")
    ToggleButton.Name = "ToggleButton"
    ToggleButton.Size = UDim2.new(0, 40, 0, 20)
    ToggleButton.Position = UDim2.new(1, -40, 0, 225)
    ToggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    ToggleButton.BorderSizePixel = 0
    ToggleButton.Parent = ContentArea
    
    local ToggleCorner = Instance.new("UICorner")
    ToggleCorner.CornerRadius = UDim.new(0, 10)
    ToggleCorner.Parent = ToggleButton
    
    local ToggleCircle = Instance.new("Frame")
    ToggleCircle.Name = "ToggleCircle"
    ToggleCircle.Size = UDim2.new(0, 16, 0, 16)
    ToggleCircle.Position = UDim2.new(0, 2, 0, 2)
    ToggleCircle.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
    ToggleCircle.BorderSizePixel = 0
    ToggleCircle.Parent = ToggleButton
    
    local ToggleCircleCorner = Instance.new("UICorner")
    ToggleCircleCorner.CornerRadius = UDim.new(1, 0)
    ToggleCircleCorner.Parent = ToggleCircle
    
    local toggleEnabled = false
    
    ToggleButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            toggleEnabled = not toggleEnabled
            
            local newPosition = toggleEnabled and UDim2.new(1, -18, 0, 2) or UDim2.new(0, 2, 0, 2)
            local newColor = toggleEnabled and Theme.AccentColor or Color3.fromRGB(60, 60, 60)
            
            TweenService:Create(ToggleCircle, TweenInfo.new(0.2), {Position = newPosition}):Play()
            TweenService:Create(ToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = newColor}):Play()
        end
    end)
    
    -- Color picker (like in the image)
    local ColorLabel = Instance.new("TextLabel")
    ColorLabel.Name = "ColorLabel"
    ColorLabel.Size = UDim2.new(0.6, 0, 0, 20)
    ColorLabel.Position = UDim2.new(0, 0, 0, 255)
    ColorLabel.BackgroundTransparency = 1
    ColorLabel.Text = "Colorpicker"
    ColorLabel.TextColor3 = Theme.TextColor
    ColorLabel.TextSize = 14
    ColorLabel.Font = Enum.Font.SourceSans
    ColorLabel.TextXAlignment = Enum.TextXAlignment.Left
    ColorLabel.Parent = ContentArea
    
    local ColorDisplay = Instance.new("Frame")
    ColorDisplay.Name = "ColorDisplay"
    ColorDisplay.Size = UDim2.new(0, 35, 0, 20)
    ColorDisplay.Position = UDim2.new(1, -35, 0, 255)
    ColorDisplay.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
    ColorDisplay.BorderSizePixel = 0
    ColorDisplay.Parent = ContentArea
    
    local ColorCorner = Instance.new("UICorner")
    ColorCorner.CornerRadius = UDim.new(0, 4)
    ColorCorner.Parent = ColorDisplay
    
    -- Footer with credits
    local Footer = Instance.new("Frame")
    Footer.Name = "Footer"
    Footer.Size = UDim2.new(1, 0, 0, 40)
    Footer.Position = UDim2.new(0, 0, 1, -40)
    Footer.BackgroundColor3 = Theme.DarkBackground
    Footer.BorderSizePixel = 0
    Footer.Parent = MainFrame
    
    local FooterCorner = Instance.new("UICorner")
    FooterCorner.CornerRadius = UDim.new(0, 6)
    FooterCorner.Parent = Footer
    
    -- Fix footer corners
    local FooterCornerFix = Instance.new("Frame")
    FooterCornerFix.Name = "FooterCornerFix"
    FooterCornerFix.Size = UDim2.new(1, 0, 0.5, 0)
    FooterCornerFix.Position = UDim2.new(0, 0, 0, 0)
    FooterCornerFix.BackgroundColor3 = Theme.DarkBackground
    FooterCornerFix.BorderSizePixel = 0
    FooterCornerFix.Parent = Footer
    
    -- Credits
    local CreditsIcon = Instance.new("ImageLabel")
    CreditsIcon.Name = "CreditsIcon"
    CreditsIcon.Size = UDim2.new(0, 30, 0, 30)
    CreditsIcon.Position = UDim2.new(0, 5, 0, 5)
    CreditsIcon.BackgroundTransparency = 1
    CreditsIcon.Image = "rbxassetid://3926307971"
    CreditsIcon.ImageRectOffset = Vector2.new(164, 84)
    CreditsIcon.ImageRectSize = Vector2.new(36, 36)
    CreditsIcon.Parent = Footer
    
    local CreditsText = Instance.new("TextLabel")
    CreditsText.Name = "CreditsText"
    CreditsText.Size = UDim2.new(1, -45, 1, 0)
    CreditsText.Position = UDim2.new(0, 40, 0, 0)
    CreditsText.BackgroundTransparency = 1
    CreditsText.Text = "LAJ HUB  |  Created by LAJ Team"
    CreditsText.TextColor3 = Theme.TextColor
    CreditsText.TextSize = 14
    CreditsText.Font = Enum.Font.SourceSans
    CreditsText.TextXAlignment = Enum.TextXAlignment.Left
    CreditsText.Parent = Footer
    
    -- Button functionality
    VerifyButton.MouseButton1Click:Connect(function()
        local keyText = KeyInput.Text
        
        if keyText == "" then
            StatusLabel.Text = "Please enter a key!"
            StatusLabel.TextColor3 = Theme.ErrorColor
            return
        end
        
        StatusLabel.Text = "Verifying key..."
        StatusLabel.TextColor3 = Theme.TextColor
        
        -- Simulate network delay (optional)
        wait(1.5)
        
        -- Verify key
        local isValid = verifyKey(keyText)
        
        -- Log key usage to webhook
        logKeyUsage(keyText, isValid)
        
        if isValid then
            StatusLabel.Text = "Key verified successfully! Loading script..."
            StatusLabel.TextColor3 = Theme.SuccessColor
            
            -- Wait a bit before loading main script
            wait(1)
            
            -- Destroy key UI
            ScreenGui:Destroy()
            
            -- Load main script
            loadMainScript()
        else
            StatusLabel.Text = "Invalid key! Please try again."
            StatusLabel.TextColor3 = Theme.ErrorColor
        end
    end)
    
    -- Animation
    MainFrame.BackgroundTransparency = 1
    TitleBar.BackgroundTransparency = 1
    TitleCornerFix.BackgroundTransparency = 1
    TabContainer.BackgroundTransparency = 1
    TabCornerFix.BackgroundTransparency = 1
    MainTab.BackgroundTransparency = 1
    KeyInput.BackgroundTransparency = 1
    VerifyButton.BackgroundTransparency = 1
    DiscordButton.BackgroundTransparency = 1
    Footer.BackgroundTransparency = 1
    FooterCornerFix.BackgroundTransparency = 1
    
    for i = 1, 0, -0.1 do
        wait(0.02)
        MainFrame.BackgroundTransparency = i
        TitleBar.BackgroundTransparency = i
        TitleCornerFix.BackgroundTransparency = i
        TabContainer.BackgroundTransparency = i
        TabCornerFix.BackgroundTransparency = i
        MainTab.BackgroundTransparency = i
        KeyInput.BackgroundTransparency = i
        VerifyButton.BackgroundTransparency = i
        DiscordButton.BackgroundTransparency = i
        Footer.BackgroundTransparency = i
        FooterCornerFix.BackgroundTransparency = i
    end
end

-- Start key system
createKeySystemUI()

-- Debug information
print("LAJ HUB Key System Loaded")
print("Waiting for key verification...")
