-- LAJ HUB Blox Fruits Script
-- Optimized for Mobile and PC Users

repeat task.wait() until game:IsLoaded()

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local VirtualUser = game:GetService("VirtualUser")

local Player = Players.LocalPlayer
local Remotes = ReplicatedStorage:WaitForChild("Remotes", 9e9)
local CommF = Remotes:WaitForChild("CommF_", 9e9)
local Enemies = workspace:WaitForChild("Enemies", 9e9)
local Boats = workspace:WaitForChild("Boats", 9e9)

-- Game Place ID check
local Sea1 = game.PlaceId == 2753915549  -- First Sea
local Sea2 = game.PlaceId == 4442272183  -- Second Sea
local Sea3 = game.PlaceId == 7449423635  -- Third Sea

-- UI Library
local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()
local Window = OrionLib:MakeWindow({
    Name = "LAJ HUB | Blox Fruits",
    HidePremium = true,
    SaveConfig = true,
    ConfigFolder = "LAJHub",
    IntroText = "LAJ HUB Loading...",
    IntroIcon = "rbxassetid://10618928818",
    Icon = "rbxassetid://10618928818"
})

-- Anti-AFK
Players.LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- Initialize settings
_G.Settings = {
    AutoFarm = false,
    FastAttack = true,
    AutoQuest = true,
    KillAura = false,
    TweenSpeed = 350,
    SeaBoatSpeed = 350,
    ESP = {
        Players = false,
        Chests = false,
        Fruits = false,
        Flowers = false
    },
    AutoRaid = false,
    AutoBuyHaki = false,
    NoClip = true,
    HideDamage = true,
    HideUI = false,
    SelectedBoss = "",
    AutoFarmBoss = false,
    WhiteScreen = false,
    AutoCollectFruit = false,
    AutoStoreFruit = false,
    SelectWeapon = "",
    SkillsConfig = {
        Z = true,
        X = true,
        C = true,
        V = true
    }
}

-- Function to get fruit names
local function GetFruitName(Fruit)
    if Fruit == "Rocket Fruit" then return "Rocket-Rocket"
    elseif Fruit == "Spin Fruit" then return "Spin-Spin"
    elseif Fruit == "Chop Fruit" then return "Chop-Chop"
    elseif Fruit == "Spring Fruit" then return "Spring-Spring"
    elseif Fruit == "Bomb Fruit" then return "Bomb-Bomb"
    elseif Fruit == "Smoke Fruit" then return "Smoke-Smoke"
    elseif Fruit == "Spike Fruit" then return "Spike-Spike"
    elseif Fruit == "Flame Fruit" then return "Flame-Flame"
    elseif Fruit == "Falcon Fruit" then return "Falcon-Falcon"
    elseif Fruit == "Ice Fruit" then return "Ice-Ice"
    elseif Fruit == "Sand Fruit" then return "Sand-Sand"
    elseif Fruit == "Dark Fruit" then return "Dark-Dark"
    elseif Fruit == "Ghost Fruit" then return "Ghost-Ghost"
    elseif Fruit == "Diamond Fruit" then return "Diamond-Diamond"
    elseif Fruit == "Light Fruit" then return "Light-Light"
    elseif Fruit == "Rubber Fruit" then return "Rubber-Rubber"
    elseif Fruit == "Barrier Fruit" then return "Barrier-Barrier"
    elseif Fruit == "Magma Fruit" then return "Magma-Magma"
    elseif Fruit == "Quake Fruit" then return "Quake-Quake"
    elseif Fruit == "Buddha Fruit" then return "Buddha-Buddha"
    elseif Fruit == "Love Fruit" then return "Love-Love"
    elseif Fruit == "Spider Fruit" then return "Spider-Spider"
    elseif Fruit == "Sound Fruit" then return "Sound-Sound"
    elseif Fruit == "Phoenix Fruit" then return "Phoenix-Phoenix"
    elseif Fruit == "Portal Fruit" then return "Portal-Portal"
    elseif Fruit == "Rumble Fruit" then return "Rumble-Rumble"
    elseif Fruit == "Pain Fruit" then return "Pain-Pain"
    elseif Fruit == "Blizzard Fruit" then return "Blizzard-Blizzard"
    elseif Fruit == "Gravity Fruit" then return "Gravity-Gravity"
    elseif Fruit == "Mammoth Fruit" then return "Mammoth-Mammoth"
    elseif Fruit == "T-Rex Fruit" then return "T-Rex-T-Rex"
    elseif Fruit == "Dough Fruit" then return "Dough-Dough"
    elseif Fruit == "Shadow Fruit" then return "Shadow-Shadow"
    elseif Fruit == "Venom Fruit" then return "Venom-Venom"
    elseif Fruit == "Control Fruit" then return "Control-Control"
    elseif Fruit == "Spirit Fruit" then return "Spirit-Spirit"
    elseif Fruit == "Dragon Fruit" then return "Dragon-Dragon"
    elseif Fruit == "Leopard Fruit" then return "Leopard-Leopard"
    elseif Fruit == "Kitsune Fruit" then return "Kitsune-Kitsune"
    end
    return nil
end

-- Boss List for each sea
local BossList = {
    -- Sea 1 (First Sea)
    Sea1 = {
        -- Raid Bosses
        "Greybeard",
        "The Saw",
        "Saber Expert",
        -- Normal Bosses
        "The Gorilla King",
        "Bobby",
        "Yeti",
        "Vice Admiral",
        "Warden",
        "Chief Warden",
        "Swan",
        "Magma Admiral",
        "Fishman Lord",
        "Wysper",
        "Thunder God",
        "Cyborg"
    },
    -- Sea 2 (Second Sea)
    Sea2 = {
        -- Raid Bosses
        "Darkbeard",
        "Cursed Captain",
        "Order",
        "Don Swan",
        -- Normal Bosses
        "Diamond",
        "Jeremy",
        "Fajita",
        "Smoke Admiral",
        "Awakened Ice Admiral",
        "Tide Keeper"
    },
    -- Sea 3 (Third Sea)
    Sea3 = {
        -- Raid Bosses
        "Dough King",
        "Cake Prince",
        "rip_indra True Form",
        "Soul Reaper",
        -- Normal Bosses
        "Stone",
        "Island Empress",
        "Kilo Admiral",
        "Captain Elephant",
        "Beautiful Pirate",
        "Cake Queen",
        "Longma"
    }
}

-- Function to get boss quest information
local function GetBossQuest(BossName)
    -- Bosses Sea 1
    if BossName == "The Gorilla King" then
        return true, CFrame.new(-1128, 6, -451), "JungleQuest"
    elseif BossName == "Bobby" then
        return true, CFrame.new(-1131, 14, 4080), "BuggyQuest1"
    elseif BossName == "Yeti" then
        return true, CFrame.new(1185, 106, -1518), "SnowQuest"
    elseif BossName == "Vice Admiral" then
        return true, CFrame.new(-4807, 21, 4360), "MarineQuest2", 2
    elseif BossName == "Swan" then
        return true, CFrame.new(5230, 4, 749), "ImpelQuest"
    elseif BossName == "Chief Warden" then
        return true, CFrame.new(5230, 4, 749), "ImpelQuest", 2
    elseif BossName == "Warden" then
        return true, CFrame.new(5230, 4, 749), "ImpelQuest", 1
    elseif BossName == "Magma Admiral" then
        return true, CFrame.new(-5694, 18, 8735), "MagmaQuest"
    elseif BossName == "Fishman Lord" then
        return true, CFrame.new(61350, 31, 1095), "FishmanQuest"
    elseif BossName == "Wysper" then
        return true, CFrame.new(-7927, 5551, -637), "SkyExp1Quest"
    elseif BossName == "Thunder God" then
        return true, CFrame.new(-7751, 5607, -2315), "SkyExp2Quest"
    elseif BossName == "Cyborg" then
        return true, CFrame.new(6138, 10, 3939), "FountainQuest"
    elseif BossName == "Saber Expert" then
        return false, CFrame.new(-1461, 30, -51)
    elseif BossName == "The Saw" then
        return false, CFrame.new(-690, 15, 1583)
    elseif BossName == "Greybeard" then
        return false, CFrame.new(-4807, 21, 4360)
    -- Bosses Sea 2
    elseif BossName == "Diamond" then
        return true, CFrame.new(-1569, 199, -31), "Area1Quest"
    elseif BossName == "Jeremy" then
        return true, CFrame.new(2316, 449, 787), "Area2Quest"
    elseif BossName == "Fajita" then
        return true, CFrame.new(-2086, 73, -4208), "MarineQuest3"
    elseif BossName == "Smoke Admiral" then
        return true, CFrame.new(-5078, 24, -5352), "IceSideQuest"
    elseif BossName == "Awakened Ice Admiral" then
        return true, CFrame.new(6473, 297, -6944), "FrostQuest"
    elseif BossName == "Tide Keeper" then
        return true, CFrame.new(-3711, 77, -11469), "ForgottenQuest"
    elseif BossName == "Don Swan" then
        return false, CFrame.new(2289, 15, 808)
    elseif BossName == "Cursed Captain" then
        return false, CFrame.new(912, 186, 33591)
    elseif BossName == "Darkbeard" then
        return false, CFrame.new(3695, 13, -3599)
    -- Bosses Sea 3
    elseif BossName == "Longma" then
        return false, CFrame.new(-10218, 333, -9444)
    elseif BossName == "Stone" then
        return true, CFrame.new(-1049, 40, 6791), "PiratePortQuest"
    elseif BossName == "Beautiful Pirate" then
        return true, CFrame.new(5241, 23, 129), "DeepForestIsland2"
    elseif BossName == "Island Empress" then
        return true, CFrame.new(5730, 602, 199), "AmazonQuest2"
    elseif BossName == "Kilo Admiral" then
        return true, CFrame.new(2889, 424, -7233), "MarineTreeIsland"
    elseif BossName == "Captain Elephant" then
        return true, CFrame.new(-13393, 319, -8423), "DeepForestIsland"
    elseif BossName == "Cake Queen" then
        return true, CFrame.new(-710, 382, -11150), "IceCreamIslandQuest"
    elseif BossName == "Dough King" or BossName == "Cake Prince" then
        return false, CFrame.new(-2103, 70, -12165)
    elseif BossName == "rip_indra True Form" then
        return false, CFrame.new(-5333, 424, -2673)
    end
end

-- Create player platform
local block = Instance.new("Part", workspace)
block.Size = Vector3.new(10, 1, 10)
block.Name = "LAJHubPlayerPlatform"
block.Anchored = true
block.CanCollide = true
block.Transparency = 0.5
block.Material = Enum.Material.ForceField

-- Anti-falling platform system
task.spawn(function()
    while task.wait() do
        pcall(function()
            if _G.Settings.AutoFarm or _G.Settings.AutoFarmBoss or _G.Settings.AutoRaid or _G.Settings.NoClip then
                if Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
                    block.CFrame = CFrame.new(Player.Character.HumanoidRootPart.Position.X, 
                                            Player.Character.HumanoidRootPart.Position.Y - 4, 
                                            Player.Character.HumanoidRootPart.Position.Z)
                    
                    -- Disable character collision
                    for _, part in pairs(Player.Character:GetChildren()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                    
                    -- Reset stun state if stunned
                    if Player.Character:FindFirstChild("Stun") and Player.Character.Stun.Value ~= 0 then
                        Player.Character.Stun.Value = 0
                    end
                    
                    -- Reset busy state if busy
                    if Player.Character:FindFirstChild("Busy") and Player.Character.Busy.Value then
                        Player.Character.Busy.Value = false
                    end
                end
            else
                block.CFrame = CFrame.new(0, -1000, 0) -- Hide platform when not needed
            end
        end)
    end
end)

-- Current active quest information
local Quest = {CFrame.new(), CFrame.new(), "", "", 1}

-- Fire server remote function
local function FireRemote(...)
    return CommF:InvokeServer(...)
end

-- Kill Aura Function
local function KillAura()
    local function KillEnemy(_, Enemy)
        local EnemyHumanoid = Enemy:FindFirstChild("Humanoid")
        
        if EnemyHumanoid and EnemyHumanoid.Health > 0 then
            local PlayerPP = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
            local EnemyPP = Enemy:FindFirstChild("HumanoidRootPart")
            
            if PlayerPP and EnemyPP and (EnemyPP.Position - PlayerPP.Position).Magnitude < 500 then
                EnemyHumanoid.Health = 0
                EnemyPP.Size = Vector3.new(50, 50, 50)
                EnemyPP.CanCollide = false
                sethiddenproperty(Player, "SimulationRadius", math.huge)
                
                -- Use skills if enabled
                if _G.Settings.SkillsConfig.Z then
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, "Z", false, game)
                    wait(0.1)
                    game:GetService("VirtualInputManager"):SendKeyEvent(false, "Z", false, game)
                end
                if _G.Settings.SkillsConfig.X then
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, "X", false, game)
                    wait(0.1)
                    game:GetService("VirtualInputManager"):SendKeyEvent(false, "X", false, game)
                end
                if _G.Settings.SkillsConfig.C then
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, "C", false, game)
                    wait(0.1)
                    game:GetService("VirtualInputManager"):SendKeyEvent(false, "C", false, game)
                end
                if _G.Settings.SkillsConfig.V then
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, "V", false, game)
                    wait(0.1)
                    game:GetService("VirtualInputManager"):SendKeyEvent(false, "V", false, game)
                end
            end
        else
            -- Try to destroy the head if humanoid is not available
            local EnemyHead = Enemy:FindFirstChild("Head")
            if EnemyHead then
                EnemyHead:Destroy()
            end
        end
    end
    
    -- Kill enemies in workspace and replicated storage
    for _, Enemy in pairs(Enemies:GetChildren()) do
        KillEnemy(nil, Enemy)
    end
    
    for _, Enemy in pairs(ReplicatedStorage:GetChildren()) do
        if Enemy:FindFirstChild("Humanoid") then
            KillEnemy(nil, Enemy)
        end
    end
end

-- Auto Kill Aura thread
task.spawn(function()
    while true do
        wait()
        if _G.Settings.KillAura then
            KillAura()
        end
    end
end)

-- Fast Attack Function
task.spawn(function()
    while true do
        wait()
        if _G.Settings.FastAttack then
            -- Fast Attack implementation
            pcall(function()
                local Combat = Player.Backpack:FindFirstChild("Combat") or Player.Character:FindFirstChild("Combat")
                
                if Combat and Player.Character:FindFirstChild("Humanoid") then
                    if not Player.Character:FindFirstChild("Combat") then
                        Player.Character.Humanoid:EquipTool(Combat)
                    end
                    
                    -- Simulate attack
                    Combat:Activate()
                    wait(0.1)
                    Combat:Deactivate()
                end
                
                -- Fast attack using weapons
                local ActiveWeapon = Player.Character:FindFirstChildOfClass("Tool")
                if ActiveWeapon and ActiveWeapon:FindFirstChild("CombatTool") then
                    ActiveWeapon:Activate()
                    wait(0.1)
                    ActiveWeapon:Deactivate()
                end
            end)
        end
    end
end)

-- Teleport function
local function TeleportTo(Position)
    if not Player.Character or not Player.Character:FindFirstChild("HumanoidRootPart") then
        return
    end
    
    local HumanoidRootPart = Player.Character.HumanoidRootPart
    local Distance = (HumanoidRootPart.Position - Position).Magnitude
    
    -- Use TweenService for smooth movement
    local Tween = TweenService:Create(
        HumanoidRootPart,
        TweenInfo.new(Distance / _G.Settings.TweenSpeed, Enum.EasingStyle.Linear),
        {CFrame = CFrame.new(Position)}
    )
    
    Tween:Play()
    return Tween
end

-- ESP Functions
local function AddESP(Part, Text, Color)
    -- Remove existing ESP
    for _, v in pairs(Part:GetChildren()) do
        if v.Name == "LAJHubESP" then
            v:Destroy()
        end
    end
    
    -- Create ESP elements
    local BillboardGui = Instance.new("BillboardGui")
    BillboardGui.Name = "LAJHubESP"
    BillboardGui.Adornee = Part
    BillboardGui.Size = UDim2.new(0, 200, 0, 50)
    BillboardGui.StudsOffset = Vector3.new(0, 2, 0)
    BillboardGui.AlwaysOnTop = true
    BillboardGui.Parent = Part
    
    local TextLabel = Instance.new("TextLabel")
    TextLabel.Name = "ESPText"
    TextLabel.Size = UDim2.new(0, 200, 0, 50)
    TextLabel.BackgroundTransparency = 1
    TextLabel.Text = Text
    TextLabel.Font = Enum.Font.GothamBold
    TextLabel.TextSize = 16
    TextLabel.TextColor3 = Color or Color3.fromRGB(255, 255, 255)
    TextLabel.TextStrokeTransparency = 0.5
    TextLabel.Parent = BillboardGui
    
    -- Add distance updating
    if Part:IsA("BasePart") and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
        spawn(function()
            while BillboardGui and BillboardGui.Parent and wait(0.1) do
                local Distance = (Player.Character.HumanoidRootPart.Position - Part.Position).Magnitude
                TextLabel.Text = Text .. " [" .. math.floor(Distance) .. "m]"
            end
        end)
    end
    
    -- Add highlight
    local Highlight = Instance.new("Highlight")
    Highlight.FillColor = Color or Color3.fromRGB(255, 255, 255)
    Highlight.OutlineColor = Color3.new(0, 0, 0)
    Highlight.FillTransparency = 0.7
    Highlight.OutlineTransparency = 0
    Highlight.Parent = Part
    
    return BillboardGui
end

-- ESP Update Function
task.spawn(function()
    while wait(1) do
        -- Player ESP
        if _G.Settings.ESP.Players then
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= Player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    AddESP(player.Character.HumanoidRootPart, player.Name, Color3.fromRGB(255, 0, 0))
                end
            end
        end
        
        -- Chest ESP
        if _G.Settings.ESP.Chests then
            for _, chest in pairs(workspace:GetChildren()) do
                if chest.Name:find("Chest") and chest:IsA("BasePart") then
                    AddESP(chest, chest.Name, Color3.fromRGB(255, 215, 0))
                end
            end
        end
        
        -- Fruit ESP
        if _G.Settings.ESP.Fruits then
            for _, fruit in pairs(workspace:GetChildren()) do
                if fruit.Name:find("Fruit") and fruit:IsA("Tool") then
                    AddESP(fruit.Handle, fruit.Name, Color3.fromRGB(0, 255, 0))
                end
            end
        end
        
        -- Flower ESP
        if _G.Settings.ESP.Flowers then
            for _, flower in pairs(workspace:GetChildren()) do
                if flower.Name:find("Flower") and flower:IsA("BasePart") then
                    AddESP(flower, flower.Name, Color3.fromRGB(255, 0, 255))
                end
            end
        end
    end
end)

-- Function to get nearby quest level enemies
local function GetNearbyQuestEnemies()
    local Enemies = {}
    for _, v in pairs(workspace.Enemies:GetChildren()) do
        if v:FindFirstChild("Humanoid") and v:FindFirstChild("HumanoidRootPart") and v.Humanoid.Health > 0 then
            if v.Name:find(Quest[3]) or v.Name:find(Quest[4]) then
                table.insert(Enemies, v)
            end
        end
    end
    return Enemies
end

-- Auto Farm function
task.spawn(function()
    while wait() do
        if _G.Settings.AutoFarm then
            pcall(function()
                -- Basic Auto Farm implementation
                if _G.Settings.AutoQuest then
                    -- Get quest if needed
                    local QuestCheck = Player.PlayerGui.Main.Quest
                    if not QuestCheck.Visible or (QuestCheck.Visible and QuestCheck.Container.QuestTitle.Title.Text:find("Defeat") and not QuestCheck.Container.QuestTitle.Title.Text:find(Quest[3])) then
                        -- Go to quest giver
                        if Quest[1] ~= CFrame.new() then
                            local Tween = TeleportTo(Quest[1].Position)
                            if Tween then Tween.Completed:Wait() end
                            
                            -- Wait for NPCs to load
                            wait(1)
                            
                            -- Fire quest remote
                            FireRemote("StartQuest", Quest[5], Quest[4])
                            wait(0.5)
                        end
                    end
                end
                
                -- Find enemies
                local Enemies = GetNearbyQuestEnemies()
                if #Enemies > 0 then
                    local ClosestEnemy = Enemies[1]
                    local ClosestDistance = (Player.Character.HumanoidRootPart.Position - ClosestEnemy.HumanoidRootPart.Position).Magnitude
                    
                    for _, enemy in pairs(Enemies) do
                        local Distance = (Player.Character.HumanoidRootPart.Position - enemy.HumanoidRootPart.Position).Magnitude
                        if Distance < ClosestDistance then
                            ClosestEnemy = enemy
                            ClosestDistance = Distance
                        end
                    end
                    
                    -- Teleport to enemy
                    TeleportTo(ClosestEnemy.HumanoidRootPart.Position + Vector3.new(0, 10, 0))
                    
                    -- Equip weapon if specified
                    if _G.Settings.SelectWeapon ~= "" then
                        local Weapon = Player.Backpack:FindFirstChild(_G.Settings.SelectWeapon) or Player.Character:FindFirstChild(_G.Settings.SelectWeapon)
                        if Weapon and not Player.Character:FindFirstChild(_G.Settings.SelectWeapon) then
                            Player.Character.Humanoid:EquipTool(Weapon)
                        end
                    end
                else
                    -- No enemies found, look for spawns
                    if Sea1 then
                        if Player.Data.Level.Value >= 1 and Player.Data.Level.Value < 10 then
                            Quest = {CFrame.new(1059.37, 16.36, 1549.75), CFrame.new(1059.37, 16.36, 1549.75), "Bandit", "BanditQuest1", 1}
                        elseif Player.Data.Level.Value >= 10 and Player.Data.Level.Value < 15 then
                            Quest = {CFrame.new(1059.37, 16.36, 1549.75), CFrame.new(1059.37, 16.36, 1549.75), "Monkey", "JungleQuest", 1}
                        elseif Player.Data.Level.Value >= 15 and Player.Data.Level.Value < 30 then
                            Quest = {CFrame.new(-1604.12, 36.9774, 153.451), CFrame.new(-1604.12, 36.9774, 153.451), "Gorilla", "JungleQuest", 2}
                        -- Add more level checks and quests
                        end
                    elseif Sea2 then
                        -- Second sea quests
                    elseif Sea3 then
                        -- Third sea quests
                    end
                    
                    -- Teleport to quest location
                    if Quest[2] ~= CFrame.new() then
                        TeleportTo(Quest[2].Position)
                    end
                end
            end)
        end
    end
end)

-- Auto Farm Boss function
task.spawn(function()
    while wait() do
        if _G.Settings.AutoFarmBoss and _G.Settings.SelectedBoss ~= "" then
            pcall(function()
                local Boss
                
                -- Find boss in workspace
                for _, v in pairs(workspace.Enemies:GetChildren()) do
                    if v.Name == _G.Settings.SelectedBoss and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                        Boss = v
                        break
                    end
                end
                
                -- Find boss in ReplicatedStorage if not in workspace
                if not Boss then
                    for _, v in pairs(ReplicatedStorage:GetChildren()) do
                        if v.Name == _G.Settings.SelectedBoss and v:FindFirstChild("Humanoid") then
                            Boss = v
                            break
                        end
                    end
                end
                
                if Boss then
                    -- Teleport to boss
                    TeleportTo(Boss.HumanoidRootPart.Position + Vector3.new(0, 10, 0))
                    
                    -- Equip weapon if specified
                    if _G.Settings.SelectWeapon ~= "" then
                        local Weapon = Player.Backpack:FindFirstChild(_G.Settings.SelectWeapon) or Player.Character:FindFirstChild(_G.Settings.SelectWeapon)
                        if Weapon and not Player.Character:FindFirstChild(_G.Settings.SelectWeapon) then
                            Player.Character.Humanoid:EquipTool(Weapon)
                        end
                    end
                else
                    -- Boss not found, get quest or go to spawn location
                    local NeedQuest, QuestCFrame, QuestName, QuestNumber = GetBossQuest(_G.Settings.SelectedBoss)
                    
                    if NeedQuest then
                        -- Get quest if needed
                        local QuestCheck = Player.PlayerGui.Main.Quest
                        if not QuestCheck.Visible or (QuestCheck.Visible and not QuestCheck.Container.QuestTitle.Title.Text:find(_G.Settings.SelectedBoss)) then
                            -- Go to quest giver
                            local Tween = TeleportTo(QuestCFrame.Position)
                            if Tween then Tween.Completed:Wait() end
                            
                            -- Wait for NPCs to load
                            wait(1)
                            
                            -- Fire quest remote
                            FireRemote("StartQuest", QuestName, QuestNumber or 1)
                            wait(0.5)
                        end
                    else
                        -- Just go to boss spawn
                        TeleportTo(QuestCFrame.Position)
                    end
                end
            end)
        end
    end
end)

-- Auto Collect Fruit function
task.spawn(function()
    while wait() do
        if _G.Settings.AutoCollectFruit then
            pcall(function()
                for _, fruit in pairs(workspace:GetChildren()) do
                    if fruit.Name:find("Fruit") and fruit:IsA("Tool") then
                        TeleportTo(fruit.Handle.Position)
                        wait(1)
                        fruit.Handle.CFrame = Player.Character.HumanoidRootPart.CFrame
                    end
                end
            end)
        end
    end
end)

-- Auto Store Fruit function
task.spawn(function()
    while wait(3) do
        if _G.Settings.AutoStoreFruit then
            pcall(function()
                -- Check for fruits in inventory
                for _, tool in pairs(Player.Backpack:GetChildren()) do
                    if tool.Name:find("Fruit") then
                        -- Store fruit
                        FireRemote("StoreFruit", GetFruitName(tool.Name), tool)
                    end
                end
                
                -- Check for fruits equipped
                for _, tool in pairs(Player.Character:GetChildren()) do
                    if tool:IsA("Tool") and tool.Name:find("Fruit") then
                        -- Store fruit
                        FireRemote("StoreFruit", GetFruitName(tool.Name), tool)
                    end
                end
            end)
        end
    end
end)

-- White Screen for performance
task.spawn(function()
    while wait() do
        if _G.Settings.WhiteScreen then
            game:GetService("RunService"):Set3dRenderingEnabled(false)
        else
            game:GetService("RunService"):Set3dRenderingEnabled(true)
        end
    end
end)

-- Hide UI for performance
task.spawn(function()
    while wait() do
        if _G.Settings.HideUI then
            Player.PlayerGui.Main.Enabled = false
        else
            Player.PlayerGui.Main.Enabled = true
        end
    end
end)

-- Build UI
local MainTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local AutoFarmSection = MainTab:AddSection({
    Name = "Auto Farm"
})

AutoFarmSection:AddToggle({
    Name = "Auto Farm Level",
    Default = false,
    Save = true,
    Flag = "AutoFarm",
    Callback = function(Value)
        _G.Settings.AutoFarm = Value
    end
})

AutoFarmSection:AddToggle({
    Name = "Auto Quest",
    Default = true,
    Save = true,
    Flag = "AutoQuest",
    Callback = function(Value)
        _G.Settings.AutoQuest = Value
    end
})

AutoFarmSection:AddToggle({
    Name = "Fast Attack",
    Default = true,
    Save = true,
    Flag = "FastAttack",
    Callback = function(Value)
        _G.Settings.FastAttack = Value
    end
})

AutoFarmSection:AddToggle({
    Name = "Kill Aura",
    Default = false,
    Save = true,
    Flag = "KillAura",
    Callback = function(Value)
        _G.Settings.KillAura = Value
    end
})

local WeaponSection = MainTab:AddSection({
    Name = "Weapon Selection"
})

-- Get player weapons
local Weapons = {}
for _, tool in pairs(Player.Backpack:GetChildren()) do
    if tool:IsA("Tool") then
        table.insert(Weapons, tool.Name)
    end
end

for _, tool in pairs(Player.Character:GetChildren()) do
    if tool:IsA("Tool") then
        table.insert(Weapons, tool.Name)
    end
end

WeaponSection:AddDropdown({
    Name = "Select Weapon",
    Default = "",
    Options = Weapons,
    Save = true,
    Flag = "SelectedWeapon",
    Callback = function(Value)
        _G.Settings.SelectWeapon = Value
    end
})

WeaponSection:AddButton({
    Name = "Refresh Weapons",
    Callback = function()
        local NewWeapons = {}
        for _, tool in pairs(Player.Backpack:GetChildren()) do
            if tool:IsA("Tool") then
                table.insert(NewWeapons, tool.Name)
            end
        end
        
        for _, tool in pairs(Player.Character:GetChildren()) do
            if tool:IsA("Tool") then
                table.insert(NewWeapons, tool.Name)
            end
        end
        
        -- Update the dropdown
        WeaponSection:UpdateDropdown("Select Weapon", NewWeapons, _G.Settings.SelectWeapon)
    end
})

local SkillsSection = MainTab:AddSection({
    Name = "Auto Skills"
})

SkillsSection:AddToggle({
    Name = "Auto Skill Z",
    Default = true,
    Save = true,
    Flag = "SkillZ",
    Callback = function(Value)
        _G.Settings.SkillsConfig.Z = Value
    end
})

SkillsSection:AddToggle({
    Name = "Auto Skill X",
    Default = true,
    Save = true,
    Flag = "SkillX",
    Callback = function(Value)
        _G.Settings.SkillsConfig.X = Value
    end
})

SkillsSection:AddToggle({
    Name = "Auto Skill C",
    Default = true,
    Save = true,
    Flag = "SkillC",
    Callback = function(Value)
        _G.Settings.SkillsConfig.C = Value
    end
})

SkillsSection:AddToggle({
    Name = "Auto Skill V",
    Default = true,
    Save = true,
    Flag = "SkillV",
    Callback = function(Value)
        _G.Settings.SkillsConfig.V = Value
    end
})

-- Boss Farm Tab
local BossTab = Window:MakeTab({
    Name = "Boss",
    Icon = "rbxassetid://7733911488",
    PremiumOnly = false
})

local BossSection = BossTab:AddSection({
    Name = "Boss Farm"
})

-- Get current sea boss list
local CurrentSeaBosses = {}
if Sea1 then
    CurrentSeaBosses = BossList.Sea1
elseif Sea2 then
    CurrentSeaBosses = BossList.Sea2
elseif Sea3 then
    CurrentSeaBosses = BossList.Sea3
end

BossSection:AddDropdown({
    Name = "Select Boss",
    Default = "",
    Options = CurrentSeaBosses,
    Save = true,
    Flag = "SelectedBoss",
    Callback = function(Value)
        _G.Settings.SelectedBoss = Value
    end
})

BossSection:AddToggle({
    Name = "Auto Farm Boss",
    Default = false,
    Save = true,
    Flag = "AutoFarmBoss",
    Callback = function(Value)
        _G.Settings.AutoFarmBoss = Value
    end
})

-- ESP Tab
local ESPTab = Window:MakeTab({
    Name = "ESP",
    Icon = "rbxassetid://7734053495",
    PremiumOnly = false
})

local ESPSection = ESPTab:AddSection({
    Name = "ESP Settings"
})

ESPSection:AddToggle({
    Name = "Player ESP",
    Default = false,
    Save = true,
    Flag = "PlayerESP",
    Callback = function(Value)
        _G.Settings.ESP.Players = Value
    end
})

ESPSection:AddToggle({
    Name = "Chest ESP",
    Default = false,
    Save = true,
    Flag = "ChestESP",
    Callback = function(Value)
        _G.Settings.ESP.Chests = Value
    end
})

ESPSection:AddToggle({
    Name = "Fruit ESP",
    Default = false,
    Save = true,
    Flag = "FruitESP",
    Callback = function(Value)
        _G.Settings.ESP.Fruits = Value
    end
})

ESPSection:AddToggle({
    Name = "Flower ESP",
    Default = false,
    Save = true,
    Flag = "FlowerESP",
    Callback = function(Value)
        _G.Settings.ESP.Flowers = Value
    end
})

-- Fruit Tab
local FruitTab = Window:MakeTab({
    Name = "Fruit",
    Icon = "rbxassetid://7733674128",
    PremiumOnly = false
})

local FruitSection = FruitTab:AddSection({
    Name = "Fruit Options"
})

FruitSection:AddToggle({
    Name = "Auto Collect Fruit",
    Default = false,
    Save = true,
    Flag = "AutoCollectFruit",
    Callback = function(Value)
        _G.Settings.AutoCollectFruit = Value
    end
})

FruitSection:AddToggle({
    Name = "Auto Store Fruit",
    Default = false,
    Save = true,
    Flag = "AutoStoreFruit",
    Callback = function(Value)
        _G.Settings.AutoStoreFruit = Value
    end
})

-- Misc Tab
local MiscTab = Window:MakeTab({
    Name = "Misc",
    Icon = "rbxassetid://7044233235",
    PremiumOnly = false
})

local MiscSection = MiscTab:AddSection({
    Name = "Misc Settings"
})

MiscSection:AddToggle({
    Name = "No Clip",
    Default = true,
    Save = true,
    Flag = "NoClip",
    Callback = function(Value)
        _G.Settings.NoClip = Value
    end
})

MiscSection:AddToggle({
    Name = "White Screen (Performance)",
    Default = false,
    Save = true,
    Flag = "WhiteScreen",
    Callback = function(Value)
        _G.Settings.WhiteScreen = Value
    end
})

MiscSection:AddToggle({
    Name = "Hide UI (Performance)",
    Default = false,
    Save = true,
    Flag = "HideUI",
    Callback = function(Value)
        _G.Settings.HideUI = Value
    end
})

MiscSection:AddToggle({
    Name = "Hide Damage (Performance)",
    Default = true,
    Save = true,
    Flag = "HideDamage",
    Callback = function(Value)
        _G.Settings.HideDamage = Value
        
        -- Hide damage numbers
        if _G.Settings.HideDamage then
            game:GetService("ReplicatedStorage").Assets.GUI.DamageCounter.Enabled = false
        else
            game:GetService("ReplicatedStorage").Assets.GUI.DamageCounter.Enabled = true
        end
    end
})

-- Settings Tab
local SettingsTab = Window:MakeTab({
    Name = "Settings",
    Icon = "rbxassetid://7734053495",
    PremiumOnly = false
})

local TweenSection = SettingsTab:AddSection({
    Name = "Tween Settings"
})

TweenSection:AddSlider({
    Name = "Tween Speed",
    Min = 100,
    Max = 500,
    Default = 350,
    Color = Color3.fromRGB(255, 255, 255),
    Increment = 10,
    Save = true,
    Flag = "TweenSpeed",
    Callback = function(Value)
        _G.Settings.TweenSpeed = Value
    end
})

TweenSection:AddSlider({
    Name = "Sea Boat Speed",
    Min = 100,
    Max = 500,
    Default = 350,
    Color = Color3.fromRGB(255, 255, 255),
    Increment = 10,
    Save = true,
    Flag = "SeaBoatSpeed",
    Callback = function(Value)
        _G.Settings.SeaBoatSpeed = Value
    end
})

-- Initialize the library
OrionLib:Init()

-- Display welcome message
OrionLib:MakeNotification({
    Name = "LAJ HUB Loaded",
    Content = "Welcome to LAJ HUB Blox Fruits script!",
    Image = "rbxassetid://10618928818",
    Time = 5
})
