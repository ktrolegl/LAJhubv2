--[[
    LAJ HUB PREMIUM RONIX
    Enhanced clean UI inspired by Ronix Hub but with premium finishes
    
    Features:
    - Minimalist dark theme with clean design
    - Premium animations and transitions
    - Subtle but impressive effects
    - Sleek modern visual style with attention to detail
]]

-- Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer

-- Configuration
local Config = {
    -- UI Settings
    UI = {
        Name = "LAJ Hub",
        Version = "Premium",
        Width = 520,
        Height = 350,
        CornerRadius = 6,
    },
    
    -- Colors (enhanced Ronix style)
    Colors = {
        Background = Color3.fromRGB(22, 22, 30),        -- Dark background
        BackgroundSecondary = Color3.fromRGB(28, 28, 36), -- Slightly lighter bg
        ElementBackground = Color3.fromRGB(35, 35, 45),  -- Element backgrounds
        Accent = Color3.fromRGB(115, 86, 209),          -- Purple accent
        AccentDark = Color3.fromRGB(93, 68, 175),       -- Darker purple
        AccentLight = Color3.fromRGB(135, 106, 230),    -- Lighter purple
        Text = Color3.fromRGB(255, 255, 255),           -- White text
        TextDimmed = Color3.fromRGB(200, 200, 220),     -- Dimmed text
        Border = Color3.fromRGB(50, 50, 70),            -- Border color
        Button = Color3.fromRGB(45, 45, 65),            -- Button background
        ButtonHover = Color3.fromRGB(55, 55, 75),       -- Button hover
        Success = Color3.fromRGB(65, 190, 110),         -- Green
        Error = Color3.fromRGB(215, 65, 65),            -- Red
        Shadow = Color3.fromRGB(15, 15, 20),            -- Shadow color
    },
    
    -- Animation settings
    Animation = {
        ShortTween = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        DefaultTween = TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        LongTween = TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        SmoothTween = TweenInfo.new(0.6, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut),
    },
    
    -- Fonts
    Fonts = {
        Title = Enum.Font.GothamBold,
        Subtitle = Enum.Font.GothamSemibold,
        Text = Enum.Font.Gotham,
        Mono = Enum.Font.Code,
    },
}

-- Helper functions
local Helper = {}

-- Create UI elements easily
function Helper.Create(className)
    return function(properties)
        local obj = Instance.new(className)
        for prop, value in pairs(properties) do
            obj[prop] = value
        end
        return obj
    end
end

-- Simplify tweening
function Helper.Tween(object, tweenInfo, properties)
    local tween = TweenService:Create(object, tweenInfo, properties)
    tween:Play()
    return tween
end

-- Create rounded corners
function Helper.Round(instance, radius)
    local corner = Helper.Create("UICorner")({
        CornerRadius = UDim.new(0, radius or Config.UI.CornerRadius),
        Parent = instance
    })
    return corner
end

-- Create stroke
function Helper.Stroke(instance, color, thickness, transparency)
    local stroke = Helper.Create("UIStroke")({
        Color = color or Config.Colors.Border,
        Thickness = thickness or 1,
        Transparency = transparency or 0,
        Parent = instance
    })
    return stroke
end

-- Create shadow
function Helper.Shadow(instance, size, transparency)
    local offset = size or 15
    local shadow = Helper.Create("ImageLabel")({
        Name = "Shadow",
        BackgroundTransparency = 1,
        Image = "rbxassetid://6014261993",
        ImageColor3 = Config.Colors.Shadow,
        ImageTransparency = transparency or 0.5,
        Position = UDim2.new(0, -offset, 0, -offset),
        Size = UDim2.new(1, offset*2, 1, offset*2),
        ScaleType = Enum.ScaleType.Slice,
        SliceCenter = Rect.new(49, 49, 450, 450),
        ZIndex = instance.ZIndex - 1,
        Parent = instance
    })
    return shadow
end

-- Create gradient
function Helper.Gradient(instance, colors, rotation)
    local gradient = Helper.Create("UIGradient")({
        Color = colors,
        Rotation = rotation or 0,
        Parent = instance
    })
    return gradient
end

-- Create a ripple effect for buttons
function Helper.Ripple(button, rippleColor)
    local rippleContainer = Helper.Create("Frame")({
        Name = "RippleContainer",
        BackgroundTransparency = 1,
        ClipsDescendants = true,
        Size = UDim2.new(1, 0, 1, 0),
        ZIndex = button.ZIndex + 1,
        Parent = button
    })
    
    Helper.Round(rippleContainer, Helper.GetCornerRadius(button))
    
    button.MouseButton1Down:Connect(function(x, y)
        -- Create ripple
        local mouse = UserInputService:GetMouseLocation()
        local buttonPos = button.AbsolutePosition
        local relX, relY = mouse.X - buttonPos.X, mouse.Y - buttonPos.Y
        
        -- Find the longest distance to a corner
        local cornerDistances = {
            (Vector2.new(0, 0) - Vector2.new(relX, relY)).Magnitude,
            (Vector2.new(button.AbsoluteSize.X, 0) - Vector2.new(relX, relY)).Magnitude,
            (Vector2.new(0, button.AbsoluteSize.Y) - Vector2.new(relX, relY)).Magnitude,
            (Vector2.new(button.AbsoluteSize.X, button.AbsoluteSize.Y) - Vector2.new(relX, relY)).Magnitude
        }
        local maxDistance = math.max(unpack(cornerDistances))
        
        -- Create ripple circle
        local ripple = Helper.Create("Frame")({
            AnchorPoint = Vector2.new(0.5, 0.5),
            BackgroundColor3 = rippleColor or Config.Colors.AccentLight,
            BackgroundTransparency = 0.7,
            Position = UDim2.new(0, relX, 0, relY),
            Size = UDim2.new(0, 0, 0, 0),
            Parent = rippleContainer
        })
        Helper.Round(ripple, 9999) -- Make it circular
        
        -- Animate ripple expansion
        Helper.Tween(ripple, Config.Animation.DefaultTween, {
            Size = UDim2.new(0, maxDistance * 2, 0, maxDistance * 2),
            BackgroundTransparency = 1
        })
        
        -- Remove ripple after animation
        game:GetService("Debris"):AddItem(ripple, Config.Animation.DefaultTween.Time + 0.1)
    end)
    
    return rippleContainer
end

-- Get UICorner radius if it exists
function Helper.GetCornerRadius(instance)
    local corner = instance:FindFirstChildOfClass("UICorner")
    if corner then
        local radius = corner.CornerRadius
        if radius.Scale > 0 then
            return math.min(
                instance.AbsoluteSize.X * radius.Scale, 
                instance.AbsoluteSize.Y * radius.Scale
            ) + radius.Offset
        else
            return radius.Offset
        end
    end
    return 0
end

-- Main UI Class
local LAJHub = {}
LAJHub.__index = LAJHub

-- Initialize the UI
function LAJHub.new()
    local self = setmetatable({}, LAJHub)
    
    -- Create GUI container
    self.GUI = Helper.Create("ScreenGui")({
        Name = "LAJHubPremium",
        ResetOnSpawn = false,
        ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
        IgnoreGuiInset = true
    })
    
    -- Try to parent to CoreGui for better persistence
    pcall(function() self.GUI.Parent = CoreGui end)
    if not self.GUI.Parent then
        self.GUI.Parent = LocalPlayer:WaitForChild("PlayerGui")
    end
    
    -- Create a blur effect for the entire screen (subtle)
    self.Blur = Helper.Create("BlurEffect")({
        Name = "LAJHubBlur",
        Size = 0,
        Parent = game:GetService("Lighting")
    })
    Helper.Tween(self.Blur, Config.Animation.LongTween, {Size = 5})
    
    -- Create the background frame that covers the whole screen with transparency
    self.Background = Helper.Create("Frame")({
        Name = "Background",
        BackgroundColor3 = Color3.fromRGB(0, 0, 0),
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 1, 0),
        Parent = self.GUI
    })
    Helper.Tween(self.Background, Config.Animation.LongTween, {BackgroundTransparency = 0.5})
    
    -- Make the background clickable to close the UI
    self.Background.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            self:Close()
        end
    end)
    
    -- Create main container with proper centering
    self.Container = Helper.Create("Frame")({
        Name = "Container",
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundTransparency = 1,
        Position = UDim2.new(0.5, 0, 0.5, 0),
        Size = UDim2.new(1, 0, 1, 0),
        Parent = self.GUI
    })
    
    -- Create main frame
    self.Main = Helper.Create("Frame")({
        Name = "Main",
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundColor3 = Config.Colors.Background,
        BorderSizePixel = 0,
        Position = UDim2.new(0.5, 0, 0.5, 0),
        Size = UDim2.new(0, 0, 0, 0), -- Start small for animation
        Parent = self.Container
    })
    
    -- Add rounded corners
    Helper.Round(self.Main, Config.UI.CornerRadius)
    
    -- Add shadow
    Helper.Shadow(self.Main, 25, 0.5)
    
    -- Add subtle border
    Helper.Stroke(self.Main, Config.Colors.Border, 1, 0.7)
    
    -- Create subtle background pattern
    local pattern = Helper.Create("ImageLabel")({
        Name = "BackgroundPattern",
        BackgroundTransparency = 1,
        Image = "rbxassetid://7484843607", -- Grid pattern
        ImageColor3 = Config.Colors.Border,
        ImageTransparency = 0.95,
        ScaleType = Enum.ScaleType.Tile,
        TileSize = UDim2.new(0, 50, 0, 50),
        Size = UDim2.new(1, 0, 1, 0),
        ZIndex = 0,
        Parent = self.Main
    })
    
    -- Add top bar
    self:CreateTopBar()
    
    -- Add navigation sidebar
    self:CreateSidebar()
    
    -- Create content area
    self:CreateContentArea()
    
    -- Populate the tabs with content
    self:CreateHomeTab()
    self:CreateGamesTab()
    self:CreateSettingsTab()
    
    -- Make the UI draggable
    self:MakeDraggable()
    
    -- Animate the UI opening
    Helper.Tween(self.Main, Config.Animation.LongTween, {
        Size = UDim2.new(0, Config.UI.Width, 0, Config.UI.Height),
    }).Completed:Connect(function()
        self:SwitchTab("Home")
        -- Show welcome notification after opening animation
        self:Notify("Welcome", "LAJ Hub Premium loaded successfully!", 3)
    end)
    
    -- Particle System (optional subtle ambient particles)
    self:CreateParticleSystem()
    
    -- Setup tab selection indicators
    self.ActiveTab = nil
    
    return self
end

-- Create top bar with title and controls
function LAJHub:CreateTopBar()
    self.TopBar = Helper.Create("Frame")({
        Name = "TopBar",
        BackgroundColor3 = Config.Colors.BackgroundSecondary,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 35),
        Parent = self.Main
    })
    
    -- Round the top corners
    Helper.Round(self.TopBar, Config.UI.CornerRadius)
    
    -- Fix the corners (only round top)
    local bottomFix = Helper.Create("Frame")({
        Name = "BottomFix",
        BackgroundColor3 = Config.Colors.BackgroundSecondary,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 1, -Config.UI.CornerRadius),
        Size = UDim2.new(1, 0, 0, Config.UI.CornerRadius),
        Parent = self.TopBar
    })
    
    -- Add hub logo
    self.Logo = Helper.Create("ImageLabel")({
        Name = "Logo",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 10, 0.5, -12),
        Size = UDim2.new(0, 24, 0, 24),
        Image = "rbxassetid://7743878358", -- Can be replaced with your own logo
        ImageColor3 = Config.Colors.Accent,
        Parent = self.TopBar
    })
    
    -- Add title
    self.Title = Helper.Create("TextLabel")({
        Name = "Title",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 40, 0, 0),
        Size = UDim2.new(1, -80, 1, 0),
        Font = Config.Fonts.Title,
        Text = Config.UI.Name .. " " .. Config.UI.Version,
        TextColor3 = Config.Colors.Text,
        TextSize = 16,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = self.TopBar
    })
    
    -- Create close button
    self.CloseButton = Helper.Create("TextButton")({
        Name = "CloseButton",
        BackgroundTransparency = 1,
        Position = UDim2.new(1, -30, 0.5, -10),
        Size = UDim2.new(0, 20, 0, 20),
        Font = Config.Fonts.Title,
        Text = "✕",
        TextColor3 = Config.Colors.Text,
        TextSize = 16,
        Parent = self.TopBar
    })
    
    -- Add close button hover effect
    self.CloseButton.MouseEnter:Connect(function()
        Helper.Tween(self.CloseButton, Config.Animation.ShortTween, {
            TextColor3 = Config.Colors.Error
        })
    end)
    
    self.CloseButton.MouseLeave:Connect(function()
        Helper.Tween(self.CloseButton, Config.Animation.ShortTween, {
            TextColor3 = Config.Colors.Text
        })
    end)
    
    -- Add click functionality to close
    self.CloseButton.MouseButton1Click:Connect(function()
        self:Close()
    end)
end

-- Create left sidebar with navigation icons
function LAJHub:CreateSidebar()
    self.Sidebar = Helper.Create("Frame")({
        Name = "Sidebar",
        BackgroundColor3 = Config.Colors.BackgroundSecondary,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 35),
        Size = UDim2.new(0, 50, 1, -35),
        Parent = self.Main
    })
    
    -- Create navigation buttons collection
    self.NavButtons = {}
    
    -- Create home button
    self.NavButtons.Home = self:CreateNavButton("Home", "rbxassetid://7734328486", 0)
    
    -- Create games button
    self.NavButtons.Games = self:CreateNavButton("Games", "rbxassetid://7743878966", 1)
    
    -- Create settings button
    self.NavButtons.Settings = self:CreateNavButton("Settings", "rbxassetid://7734053495", 2)
end

-- Create a navigation button
function LAJHub:CreateNavButton(name, icon, order)
    local button = Helper.Create("ImageButton")({
        Name = name .. "Button",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 0, 0, 10 + (order * 50)),
        Size = UDim2.new(1, 0, 0, 40),
        Image = icon,
        ImageColor3 = Config.Colors.TextDimmed,
        ImageTransparency = 0.4,
        ScaleType = Enum.ScaleType.Fit,
        Parent = self.Sidebar
    })
    
    -- Add selection indicator
    local indicator = Helper.Create("Frame")({
        Name = "Indicator",
        BackgroundColor3 = Config.Colors.Accent,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0.5, -15),
        Size = UDim2.new(0, 2, 0, 30),
        Visible = false,
        Parent = button
    })
    
    -- Add hover effect
    button.MouseEnter:Connect(function()
        if not indicator.Visible then
            Helper.Tween(button, Config.Animation.ShortTween, {
                ImageColor3 = Config.Colors.Text,
                ImageTransparency = 0
            })
        end
    end)
    
    button.MouseLeave:Connect(function()
        if not indicator.Visible then
            Helper.Tween(button, Config.Animation.ShortTween, {
                ImageColor3 = Config.Colors.TextDimmed,
                ImageTransparency = 0.4
            })
        end
    end)
    
    -- Add button functionality
    button.MouseButton1Click:Connect(function()
        self:SwitchTab(name)
    end)
    
    return {
        Button = button,
        Indicator = indicator
    }
end

-- Create content area
function LAJHub:CreateContentArea()
    self.Content = Helper.Create("Frame")({
        Name = "Content",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 50, 0, 35),
        Size = UDim2.new(1, -50, 1, -35),
        ClipsDescendants = true,
        Parent = self.Main
    })
    
    -- Create content pages
    self.Pages = {}
    
    -- Home page
    self.Pages.Home = Helper.Create("Frame")({
        Name = "HomePage",
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 1, 0),
        Visible = false,
        Parent = self.Content
    })
    
    -- Games page
    self.Pages.Games = Helper.Create("ScrollingFrame")({
        Name = "GamesPage",
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 1, 0),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = 4,
        ScrollBarImageColor3 = Config.Colors.Accent,
        ScrollBarImageTransparency = 0.5,
        VerticalScrollBarPosition = Enum.VerticalScrollBarPosition.Right,
        Visible = false,
        Parent = self.Content
    })
    
    -- Add layout for games page
    Helper.Create("UIListLayout")({
        Padding = UDim.new(0, 8),
        SortOrder = Enum.SortOrder.LayoutOrder,
        Parent = self.Pages.Games
    })
    
    -- Add padding for games page
    Helper.Create("UIPadding")({
        PaddingLeft = UDim.new(0, 15),
        PaddingRight = UDim.new(0, 15),
        PaddingTop = UDim.new(0, 15),
        PaddingBottom = UDim.new(0, 15),
        Parent = self.Pages.Games
    })
    
    -- Settings page
    self.Pages.Settings = Helper.Create("Frame")({
        Name = "SettingsPage",
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 1, 0),
        Visible = false,
        Parent = self.Content
    })
end

-- Create home tab content
function LAJHub:CreateHomeTab()
    local homePage = self.Pages.Home
    
    -- Welcome header
    local welcomeLabel = Helper.Create("TextLabel")({
        Name = "WelcomeLabel",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 0, 20),
        Size = UDim2.new(1, -40, 0, 30),
        Font = Config.Fonts.Title,
        Text = "Welcome",
        TextColor3 = Config.Colors.Text,
        TextSize = 24,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = homePage
    })
    
    -- Add logo container
    local logoContainer = Helper.Create("Frame")({
        Name = "LogoContainer",
        AnchorPoint = Vector2.new(0.5, 0),
        BackgroundTransparency = 1,
        Position = UDim2.new(0.5, 0, 0, 60),
        Size = UDim2.new(0, 100, 0, 100),
        Parent = homePage
    })
    
    -- Logo image with glowing effect
    local logoImage = Helper.Create("ImageLabel")({
        Name = "LogoImage",
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundTransparency = 1,
        Position = UDim2.new(0.5, 0, 0.5, 0),
        Size = UDim2.new(0, 80, 0, 80),
        Image = "rbxassetid://7743878358", -- Can be replaced with your own logo
        ImageColor3 = Config.Colors.Accent,
        Parent = logoContainer
    })
    
    -- Add subtle pulse animation to logo
    spawn(function()
        while logoImage and logoImage.Parent do
            Helper.Tween(logoImage, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
                ImageColor3 = Config.Colors.AccentLight
            }).Completed:Wait()
            
            Helper.Tween(logoImage, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
                ImageColor3 = Config.Colors.Accent
            }).Completed:Wait()
        end
    end)
    
    -- Description text
    local descriptionLabel = Helper.Create("TextLabel")({
        Name = "DescriptionLabel",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 0, 170),
        Size = UDim2.new(1, -40, 0, 40),
        Font = Config.Fonts.Text,
        Text = "Your premium script hub for Roblox games. Select a game from the Games tab to load scripts.",
        TextColor3 = Config.Colors.TextDimmed,
        TextSize = 14,
        TextWrapped = true,
        Parent = homePage
    })
    
    -- Quick access section
    local quickAccessLabel = Helper.Create("TextLabel")({
        Name = "QuickAccessLabel",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 0, 220),
        Size = UDim2.new(1, -40, 0, 20),
        Font = Config.Fonts.Subtitle,
        Text = "Quick Access",
        TextColor3 = Config.Colors.Text,
        TextSize = 16,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = homePage
    })
    
    -- Quick access buttons container
    local quickAccessFrame = Helper.Create("Frame")({
        Name = "QuickAccessFrame",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 0, 250),
        Size = UDim2.new(1, -40, 0, 50),
        Parent = homePage
    })
    
    -- Create blox fruits quick access button
    local bloxFruits = self:CreateButton("Blox Fruits", function()
        self:ExecuteScript("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", "Blox Fruits")
    end, quickAccessFrame, UDim2.new(0, 0, 0, 0), UDim2.new(0.48, 0, 0, 40))
    
    -- Create dead rails quick access button
    local deadRails = self:CreateButton("Dead Rails", function()
        self:ExecuteScript("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", "Dead Rails")
    end, quickAccessFrame, UDim2.new(0.52, 0, 0, 0), UDim2.new(0.48, 0, 0, 40))
end

-- Create games tab content
function LAJHub:CreateGamesTab()
    local gamesPage = self.Pages.Games
    
    -- Game scripts data
    local gameScripts = {
        {
            name = "Blox Fruits",
            description = "Auto-farm, ESP, teleports, and more",
            url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"
        },
        {
            name = "Dead Rails",
            description = "Auto-farm, ESP, teleports, and gameplay enhancements",
            url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"
        },
        {
            name = "Pet Simulator 99",
            description = "Auto-farm coins, eggs, and other features",
            url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"
        },
        {
            name = "Anime Fighting Simulator",
            description = "Auto-train, auto-farm, and teleports",
            url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"
        },
        {
            name = "Adopt Me",
            description = "Auto-farm, teleports, and other features",
            url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"
        },
        {
            name = "Jailbreak",
            description = "Auto-rob, ESP, and other features",
            url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"
        },
        {
            name = "Arsenal",
            description = "Aimbot, ESP, and other combat enhancements",
            url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"
        },
        {
            name = "Murder Mystery 2",
            description = "ESP, coin farm, and other features",
            url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"
        }
    }
    
    -- Create game cards
    for i, game in ipairs(gameScripts) do
        self:CreateGameCard(game.name, game.description, game.url, i)
    end
    
    -- Update canvas size based on content
    local layout = gamesPage:FindFirstChildOfClass("UIListLayout")
    layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        gamesPage.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
    end)
end

-- Create settings tab content
function LAJHub:CreateSettingsTab()
    local settingsPage = self.Pages.Settings
    
    -- Title
    local titleLabel = Helper.Create("TextLabel")({
        Name = "TitleLabel",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 0, 20),
        Size = UDim2.new(1, -40, 0, 30),
        Font = Config.Fonts.Title,
        Text = "Settings",
        TextColor3 = Config.Colors.Text,
        TextSize = 24,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = settingsPage
    })
    
    -- Auto-load setting
    local autoLoadContainer = Helper.Create("Frame")({
        Name = "AutoLoadContainer",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 0, 70),
        Size = UDim2.new(1, -40, 0, 24),
        Parent = settingsPage
    })
    
    -- Auto-load label
    Helper.Create("TextLabel")({
        Name = "AutoLoadLabel",
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -60, 1, 0),
        Font = Config.Fonts.Text,
        Text = "Auto-load scripts",
        TextColor3 = Config.Colors.Text,
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = autoLoadContainer
    })
    
    -- Toggle switch
    local toggleButton = Helper.Create("Frame")({
        Name = "ToggleButton",
        BackgroundColor3 = Config.Colors.Accent,
        Position = UDim2.new(1, -40, 0.5, -10),
        Size = UDim2.new(0, 40, 0, 20),
        Parent = autoLoadContainer
    })
    Helper.Round(toggleButton, 10)
    
    -- Toggle indicator ball
    local toggleBall = Helper.Create("Frame")({
        Name = "ToggleBall",
        BackgroundColor3 = Config.Colors.Text,
        Position = UDim2.new(1, -18, 0.5, -8),
        Size = UDim2.new(0, 16, 0, 16),
        Parent = toggleButton
    })
    Helper.Round(toggleBall, 8)
    
    -- Add toggle functionality
    local toggleEnabled = true
    toggleButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            toggleEnabled = not toggleEnabled
            
            local targetPos = toggleEnabled and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
            local targetColor = toggleEnabled and Config.Colors.Accent or Config.Colors.Button
            
            Helper.Tween(toggleBall, Config.Animation.DefaultTween, {
                Position = targetPos
            })
            
            Helper.Tween(toggleButton, Config.Animation.DefaultTween, {
                BackgroundColor3 = targetColor
            })
        end
    end)
    
    -- Theme selection
    local themeLabel = Helper.Create("TextLabel")({
        Name = "ThemeLabel",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 0, 110),
        Size = UDim2.new(1, -40, 0, 24),
        Font = Config.Fonts.Text,
        Text = "Theme",
        TextColor3 = Config.Colors.Text,
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = settingsPage
    })
    
    -- Theme buttons container
    local themeContainer = Helper.Create("Frame")({
        Name = "ThemeContainer",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 0, 140),
        Size = UDim2.new(1, -40, 0, 30),
        Parent = settingsPage
    })
    
    -- Dark theme button (selected by default)
    local darkButton = Helper.Create("TextButton")({
        Name = "DarkButton",
        BackgroundColor3 = Config.Colors.ElementBackground,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 0),
        Size = UDim2.new(0.3, -5, 1, 0),
        Font = Config.Fonts.Text,
        Text = "Dark",
        TextColor3 = Config.Colors.Text,
        TextSize = 14,
        Parent = themeContainer
    })
    Helper.Round(darkButton, 4)
    Helper.Stroke(darkButton, Config.Colors.Accent, 2)
    Helper.Ripple(darkButton)
    
    -- Light theme button
    local lightButton = Helper.Create("TextButton")({
        Name = "LightButton",
        BackgroundColor3 = Config.Colors.ElementBackground,
        BorderSizePixel = 0,
        Position = UDim2.new(0.35, 0, 0, 0),
        Size = UDim2.new(0.3, -5, 1, 0),
        Font = Config.Fonts.Text,
        Text = "Light",
        TextColor3 = Config.Colors.TextDimmed,
        TextSize = 14,
        Parent = themeContainer
    })
    Helper.Round(lightButton, 4)
    Helper.Stroke(lightButton, Config.Colors.Border, 1, 0.7)
    Helper.Ripple(lightButton)
    
    -- System theme button
    local systemButton = Helper.Create("TextButton")({
        Name = "SystemButton",
        BackgroundColor3 = Config.Colors.ElementBackground,
        BorderSizePixel = 0,
        Position = UDim2.new(0.7, 0, 0, 0),
        Size = UDim2.new(0.3, 0, 1, 0),
        Font = Config.Fonts.Text,
        Text = "System",
        TextColor3 = Config.Colors.TextDimmed,
        TextSize = 14,
        Parent = themeContainer
    })
    Helper.Round(systemButton, 4)
    Helper.Stroke(systemButton, Config.Colors.Border, 1, 0.7)
    Helper.Ripple(systemButton)
    
    -- Version label
    Helper.Create("TextLabel")({
        Name = "VersionLabel",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 1, -40),
        Size = UDim2.new(1, -40, 0, 20),
        Font = Config.Fonts.Text,
        Text = Config.UI.Name .. " " .. Config.UI.Version,
        TextColor3 = Config.Colors.TextDimmed,
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = settingsPage
    })
    
    -- Discord link
    Helper.Create("TextLabel")({
        Name = "DiscordLabel",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 20, 1, -20),
        Size = UDim2.new(1, -40, 0, 20),
        Font = Config.Fonts.Text,
        Text = "discord.gg/lajhub",
        TextColor3 = Config.Colors.Accent,
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = settingsPage
    })
end

-- Create a game card for games tab
function LAJHub:CreateGameCard(name, description, url, order)
    local card = Helper.Create("Frame")({
        Name = name .. "Card",
        BackgroundColor3 = Config.Colors.BackgroundSecondary,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 70),
        LayoutOrder = order,
        Parent = self.Pages.Games
    })
    Helper.Round(card, Config.UI.CornerRadius)
    
    -- Game title
    local gameTitle = Helper.Create("TextLabel")({
        Name = "GameTitle",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 10, 0, 8),
        Size = UDim2.new(1, -110, 0, 24),
        Font = Config.Fonts.Subtitle,
        Text = name,
        TextColor3 = Config.Colors.Text,
        TextSize = 15,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = card
    })
    
    -- Game description
    local description = Helper.Create("TextLabel")({
        Name = "Description",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 10, 0, 32),
        Size = UDim2.new(1, -110, 0, 32),
        Font = Config.Fonts.Text,
        Text = description,
        TextColor3 = Config.Colors.TextDimmed,
        TextSize = 13,
        TextWrapped = true,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = card
    })
    
    -- Execute button
    local executeButton = Helper.Create("TextButton")({
        Name = "ExecuteButton",
        BackgroundColor3 = Config.Colors.Accent,
        BorderSizePixel = 0,
        Position = UDim2.new(1, -100, 0.5, -15),
        Size = UDim2.new(0, 90, 0, 30),
        Font = Config.Fonts.Subtitle,
        Text = "EXECUTE",
        TextColor3 = Config.Colors.Text,
        TextSize = 14,
        Parent = card
    })
    Helper.Round(executeButton, 4)
    Helper.Ripple(executeButton, Color3.fromRGB(255, 255, 255))
    
    -- Add button functionality
    executeButton.MouseButton1Click:Connect(function()
        self:ExecuteScript(url, name)
    end)
    
    -- Add hover effects
    card.MouseEnter:Connect(function()
        Helper.Tween(card, Config.Animation.ShortTween, {
            BackgroundColor3 = Config.Colors.BackgroundSecondary:Lerp(Config.Colors.Accent, 0.05)
        })
    end)
    
    card.MouseLeave:Connect(function()
        Helper.Tween(card, Config.Animation.ShortTween, {
            BackgroundColor3 = Config.Colors.BackgroundSecondary
        })
    end)
    
    executeButton.MouseEnter:Connect(function()
        Helper.Tween(executeButton, Config.Animation.ShortTween, {
            BackgroundColor3 = Config.Colors.AccentDark
        })
    end)
    
    executeButton.MouseLeave:Connect(function()
        Helper.Tween(executeButton, Config.Animation.ShortTween, {
            BackgroundColor3 = Config.Colors.Accent
        })
    end)
    
    return card
end

-- Create a button with ripple effect
function LAJHub:CreateButton(text, callback, parent, position, size)
    local button = Helper.Create("TextButton")({
        Name = text .. "Button",
        BackgroundColor3 = Config.Colors.Button,
        BorderSizePixel = 0,
        Position = position,
        Size = size,
        Font = Config.Fonts.Subtitle,
        Text = text,
        TextColor3 = Config.Colors.Text,
        TextSize = 14,
        Parent = parent
    })
    
    -- Add rounded corners
    Helper.Round(button, 4)
    
    -- Add subtle stroke
    Helper.Stroke(button, Config.Colors.Accent, 1, 0.7)
    
    -- Add ripple effect
    Helper.Ripple(button)
    
    -- Add hover effects
    button.MouseEnter:Connect(function()
        Helper.Tween(button, Config.Animation.ShortTween, {
            BackgroundColor3 = Config.Colors.ButtonHover
        })
    end)
    
    button.MouseLeave:Connect(function()
        Helper.Tween(button, Config.Animation.ShortTween, {
            BackgroundColor3 = Config.Colors.Button
        })
    end)
    
    -- Add functionality
    button.MouseButton1Click:Connect(function()
        if callback then
            callback()
        end
    end)
    
    return button
end

-- Switch between tabs
function LAJHub:SwitchTab(tabName)
    -- Don't do anything if we're already on this tab
    if self.ActiveTab == tabName then
        return
    end
    
    -- Store the new active tab
    self.ActiveTab = tabName
    
    -- Hide all pages
    for name, page in pairs(self.Pages) do
        if page.Visible then
            Helper.Tween(page, Config.Animation.ShortTween, {
                Position = UDim2.new(0.1, 0, 0, 0),
                Transparency = 1
            }).Completed:Connect(function()
                page.Visible = false
                page.Position = UDim2.new(-0.1, 0, 0, 0)
            end)
        end
    end
    
    -- Reset all navigation button states
    for name, navButton in pairs(self.NavButtons) do
        navButton.Indicator.Visible = false
        
        Helper.Tween(navButton.Button, Config.Animation.ShortTween, {
            ImageColor3 = Config.Colors.TextDimmed,
            ImageTransparency = 0.4
        })
    end
    
    -- Show the selected page with animation
    if self.Pages[tabName] then
        local page = self.Pages[tabName]
        page.Position = UDim2.new(-0.1, 0, 0, 0)
        page.Visible = true
        
        Helper.Tween(page, Config.Animation.DefaultTween, {
            Position = UDim2.new(0, 0, 0, 0),
            Transparency = 0
        })
    end
    
    -- Update the active navigation button
    if self.NavButtons[tabName] then
        local navButton = self.NavButtons[tabName]
        navButton.Indicator.Visible = true
        
        Helper.Tween(navButton.Button, Config.Animation.ShortTween, {
            ImageColor3 = Config.Colors.Accent,
            ImageTransparency = 0
        })
    end
    
    -- Update title based on selected tab
    if tabName == "Home" then
        self.Title.Text = Config.UI.Name .. " " .. Config.UI.Version
    else
        self.Title.Text = tabName
    end
end

-- Create notification
function LAJHub:Notify(title, message, duration)
    duration = duration or 3
    
    -- Create notification container
    local notification = Helper.Create("Frame")({
        Name = "Notification",
        AnchorPoint = Vector2.new(1, 1),
        BackgroundColor3 = Config.Colors.BackgroundSecondary,
        BorderSizePixel = 0,
        Position = UDim2.new(1, 10, 1, -10),
        Size = UDim2.new(0, 250, 0, 80),
        ZIndex = 10,
        Parent = self.GUI
    })
    
    -- Add rounded corners
    Helper.Round(notification, Config.UI.CornerRadius)
    
    -- Add subtle shadow
    Helper.Shadow(notification, 10, 0.7)
    
    -- Add accent bar
    local accentBar = Helper.Create("Frame")({
        Name = "AccentBar",
        BackgroundColor3 = Config.Colors.Accent,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 0),
        Size = UDim2.new(0, 4, 1, 0),
        ZIndex = 11,
        Parent = notification
    })
    
    -- Add title
    local titleLabel = Helper.Create("TextLabel")({
        Name = "Title",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 15, 0, 8),
        Size = UDim2.new(1, -25, 0, 20),
        Font = Config.Fonts.Subtitle,
        Text = title,
        TextColor3 = Config.Colors.Accent,
        TextSize = 16,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 11,
        Parent = notification
    })
    
    -- Add message
    local messageLabel = Helper.Create("TextLabel")({
        Name = "Message",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 15, 0, 32),
        Size = UDim2.new(1, -25, 0, 40),
        Font = Config.Fonts.Text,
        Text = message,
        TextColor3 = Config.Colors.Text,
        TextSize = 14,
        TextWrapped = true,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 11,
        Parent = notification
    })
    
    -- Progress bar for notification duration
    local progressBar = Helper.Create("Frame")({
        Name = "ProgressBar",
        BackgroundColor3 = Config.Colors.Accent,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 1, -2),
        Size = UDim2.new(1, 0, 0, 2),
        ZIndex = 11,
        Parent = notification
    })
    
    -- Animate in
    notification.Position = UDim2.new(1, 300, 1, -10)
    Helper.Tween(notification, Config.Animation.DefaultTween, {
        Position = UDim2.new(1, -10, 1, -10)
    })
    
    -- Animate progress bar
    Helper.Tween(progressBar, TweenInfo.new(duration, Enum.EasingStyle.Linear), {
        Size = UDim2.new(0, 0, 0, 2)
    })
    
    -- Auto remove after duration
    spawn(function()
        wait(duration)
        
        -- Animate out
        Helper.Tween(notification, Config.Animation.DefaultTween, {
            Position = UDim2.new(1, 300, 1, -10)
        }).Completed:Wait()
        
        notification:Destroy()
    end)
    
    return notification
end

-- Close the UI
function LAJHub:Close()
    -- Fade out the entire UI
    Helper.Tween(self.Main, Config.Animation.DefaultTween, {
        Size = UDim2.new(0, 0, 0, 0)
    })
    
    Helper.Tween(self.Background, Config.Animation.DefaultTween, {
        BackgroundTransparency = 1
    })
    
    Helper.Tween(self.Blur, Config.Animation.DefaultTween, {
        Size = 0
    }).Completed:Connect(function()
        -- Remove the blur first
        self.Blur:Destroy()
        
        -- Then destroy the entire UI
        self.GUI:Destroy()
    end)
end

-- Make UI draggable
function LAJHub:MakeDraggable()
    local frame = self.Main
    local dragToggle, dragStart, startPos
    
    self.TopBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragToggle = true
            dragStart = input.Position
            startPos = frame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragToggle = false
                end
            end)
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and dragToggle then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
end

-- Create subtle particle effects
function LAJHub:CreateParticleSystem()
    -- Create particle container
    self.ParticleContainer = Helper.Create("Frame")({
        Name = "ParticleContainer",
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 1, 0),
        ZIndex = 0,
        Parent = self.Main
    })
    
    -- Create particles
    local particleCount = 15
    local particles = {}
    
    for i = 1, particleCount do
        local size = math.random(2, 4)
        local particle = Helper.Create("Frame")({
            Name = "Particle" .. i,
            BackgroundColor3 = Config.Colors.Accent,
            BackgroundTransparency = math.random(85, 95) / 100,
            BorderSizePixel = 0,
            Position = UDim2.new(math.random(0, 100) / 100, 0, math.random(0, 100) / 100, 0),
            Size = UDim2.new(0, size, 0, size),
            ZIndex = 0,
            Parent = self.ParticleContainer
        })
        Helper.Round(particle, size / 2)
        table.insert(particles, particle)
    end
    
    -- Animate particles
    spawn(function()
        while self.ParticleContainer and self.ParticleContainer.Parent do
            for _, particle in ipairs(particles) do
                if particle and particle.Parent then
                    -- Random slow upward/sideways drift
                    local xOffset = math.random(-20, 20)
                    local yOffset = math.random(-50, -20)
                    local duration = math.random(30, 60) / 10
                    
                    Helper.Tween(particle, TweenInfo.new(duration, Enum.EasingStyle.Linear), {
                        Position = UDim2.new(
                            particle.Position.X.Scale,
                            particle.Position.X.Offset + xOffset,
                            particle.Position.Y.Scale,
                            particle.Position.Y.Offset + yOffset
                        ),
                        BackgroundTransparency = 1
                    }).Completed:Connect(function()
                        -- Reset particle
                        if particle and particle.Parent then
                            particle.Position = UDim2.new(math.random(0, 100) / 100, 0, 1, 5)
                            particle.BackgroundTransparency = math.random(85, 95) / 100
                        end
                    end)
                end
            end
            wait(0.5)
        end
    end)
end

-- Execute a script
function LAJHub:ExecuteScript(url, gameName)
    self:Notify("Executing", "Loading script for " .. gameName .. "...", 1)
    
    -- Use pcall to safely execute the script
    pcall(function()
        loadstring(game:HttpGet(url, true))()
    end)
    
    -- Notify success
    self:Notify("Success", "Successfully loaded script for " .. gameName, 3)
end

-- Create the hub instance
local hub = LAJHub.new()
return hub
