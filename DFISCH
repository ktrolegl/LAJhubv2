--[[
    LAJ HUB Modern UI - Enhanced Edition
    Ultra-sleek modern UI with premium animations and effects
    Features automatic script detection and easy game selection
]]

-- Create Services
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

-- Premium color scheme (deep purple/black theme with neon accents)
local colors = {
    background = Color3.fromRGB(15, 10, 25),      -- Ultra dark background
    backgroundAlt = Color3.fromRGB(20, 15, 30),   -- Slightly lighter background for contrast
    backgroundLight = Color3.fromRGB(30, 20, 45), -- Light background for buttons
    accent = Color3.fromRGB(140, 70, 255),        -- Vibrant purple
    accentGradient = Color3.fromRGB(110, 50, 220),-- Darker purple for gradients
    accentBright = Color3.fromRGB(180, 100, 255), -- Brighter purple for highlights
    accentSecondary = Color3.fromRGB(0, 200, 255),-- Cyan blue accent
    accentTertiary = Color3.fromRGB(255, 70, 100),-- Pink accent
    text = Color3.fromRGB(240, 240, 255),         -- Almost white text
    textDim = Color3.fromRGB(180, 180, 200),      -- Dimmed text
    shadow = Color3.fromRGB(0, 0, 0),             -- Shadow color
    success = Color3.fromRGB(70, 230, 130),       -- Success green
    warning = Color3.fromRGB(255, 180, 40),       -- Warning yellow
    error = Color3.fromRGB(255, 70, 70)           -- Error red
}

-- UI Configuration
local config = {
    cornerRadius = 8,
    borderWidth = 1,
    frameWidth = 550,
    frameHeight = 350,
    sidebarWidth = 60,
    titlebarHeight = 40,
    animSpeed = 0.3,
    animSpeedFast = 0.15,
    animSpeedSlow = 0.5,
    buttonSize = 36
}

-- Helper function to easily create UI elements
local function Create(instanceType)
    return function(properties)
        local instance = Instance.new(instanceType)
        for property, value in pairs(properties) do
            instance[property] = value
        end
        return instance
    end
end

-- Create main UI
local LAJHub = Create("ScreenGui")({
    Name = "LAJHub",
    ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
    ResetOnSpawn = false,
    DisplayOrder = 100
})

-- Try to parent to CoreGui for persistence
pcall(function() LAJHub.Parent = game:GetService("CoreGui") end)
if not LAJHub.Parent then LAJHub.Parent = Players.LocalPlayer:WaitForChild("PlayerGui") end

-- Main container
local MainFrame = Create("Frame")({
    Name = "MainFrame",
    Parent = LAJHub,
    BackgroundColor3 = colors.background,
    BorderSizePixel = 0,
    Position = UDim2.new(0.5, -config.frameWidth/2, 0.5, -config.frameHeight/2),
    Size = UDim2.new(0, config.frameWidth, 0, config.frameHeight),
    ClipsDescendants = true,
    Active = true,
    Draggable = true
})

-- Add corners to main frame
local MainCorner = Create("UICorner")({
    Parent = MainFrame,
    CornerRadius = UDim.new(0, config.cornerRadius)
})

-- Add gradient to main frame for depth
local MainGradient = Create("UIGradient")({
    Parent = MainFrame,
    Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, colors.background),
        ColorSequenceKeypoint.new(1, colors.background:Lerp(Color3.new(0,0,0), 0.3))
    }),
    Rotation = 45
})

-- Add outer glow
local OuterGlow = Create("ImageLabel")({
    Name = "OuterGlow",
    Parent = MainFrame,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, -20, 0, -20),
    Size = UDim2.new(1, 40, 1, 40),
    Image = "rbxassetid://5028857084", -- Soft glow
    ImageColor3 = colors.accent,
    ImageTransparency = 0.7,
    ZIndex = -1
})

-- Create shadow
local Shadow = Create("ImageLabel")({
    Name = "Shadow",
    Parent = MainFrame,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, -15, 0, -15),
    Size = UDim2.new(1, 30, 1, 30),
    ZIndex = -2,
    Image = "rbxassetid://6014261993",
    ImageColor3 = colors.shadow,
    ImageTransparency = 0.5,
    ScaleType = Enum.ScaleType.Slice,
    SliceCenter = Rect.new(49, 49, 450, 450)
})

-- Add pulsing neon border
local NeonBorder = Create("UIStroke")({
    Parent = MainFrame,
    ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
    Color = colors.accent,
    Thickness = config.borderWidth,
    Transparency = 0.3
})

-- Animate border
spawn(function()
    while NeonBorder and NeonBorder.Parent do
        TweenService:Create(NeonBorder, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            Color = colors.accentBright,
            Transparency = 0.1
        }):Play()
        
        wait(1.5)
        
        if not NeonBorder or not NeonBorder.Parent then break end
        
        TweenService:Create(NeonBorder, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            Color = colors.accent,
            Transparency = 0.3
        }):Play()
        
        wait(1.5)
    end
end)

-- Top bar
local TopBar = Create("Frame")({
    Name = "TopBar",
    Parent = MainFrame,
    BackgroundColor3 = colors.backgroundAlt,
    BorderSizePixel = 0,
    Size = UDim2.new(1, 0, 0, config.titlebarHeight)
})

-- Add top corners
local TopCorner = Create("UICorner")({
    Parent = TopBar,
    CornerRadius = UDim.new(0, config.cornerRadius)
})

-- Fix corners at bottom of top bar
local TopFix = Create("Frame")({
    Name = "TopFix",
    Parent = TopBar,
    BackgroundColor3 = colors.backgroundAlt,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0.5, 0),
    Size = UDim2.new(1, 0, 0.5, 0)
})

-- Add gradient to top bar
local TopGradient = Create("UIGradient")({
    Parent = TopBar,
    Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, colors.backgroundAlt:Lerp(colors.accent, 0.05)),
        ColorSequenceKeypoint.new(1, colors.backgroundAlt)
    }),
    Rotation = 90
})

-- Title and logo
local TitleIcon = Create("ImageLabel")({
    Name = "TitleIcon",
    Parent = TopBar,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 12, 0, 6),
    Size = UDim2.new(0, 28, 0, 28),
    Image = "rbxassetid://7743878358", -- Shark icon
    ImageColor3 = colors.accent
})

-- Add glow to logo
local IconGlow = Create("ImageLabel")({
    Name = "IconGlow",
    Parent = TitleIcon,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, -5, 0, -5),
    Size = UDim2.new(1, 10, 1, 10),
    Image = "rbxassetid://5028857084", -- Glow texture
    ImageColor3 = colors.accent,
    ImageTransparency = 0.7,
    ZIndex = -1
})

-- Animate the icon glow
spawn(function()
    while IconGlow and IconGlow.Parent do
        TweenService:Create(IconGlow, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            ImageTransparency = 0.5,
            Size = UDim2.new(1, 15, 1, 15),
            Position = UDim2.new(0, -7.5, 0, -7.5)
        }):Play()
        
        wait(1.5)
        
        if not IconGlow or not IconGlow.Parent then break end
        
        TweenService:Create(IconGlow, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            ImageTransparency = 0.7,
            Size = UDim2.new(1, 10, 1, 10),
            Position = UDim2.new(0, -5, 0, -5)
        }):Play()
        
        wait(1.5)
    end
end)

local TitleLabel = Create("TextLabel")({
    Name = "TitleLabel",
    Parent = TopBar,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 50, 0, 0),
    Size = UDim2.new(1, -120, 1, 0),
    Font = Enum.Font.GothamBold,
    Text = "LAJ HUB",
    TextColor3 = colors.accent,
    TextSize = 18,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- Add animated color gradient to title
spawn(function()
    while TitleLabel and TitleLabel.Parent do
        TweenService:Create(TitleLabel, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            TextColor3 = colors.accentBright
        }):Play()
        
        wait(2)
        
        if not TitleLabel or not TitleLabel.Parent then break end
        
        TweenService:Create(TitleLabel, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            TextColor3 = colors.accent
        }):Play()
        
        wait(2)
    end
end)

-- Window controls
local CloseButton = Create("ImageButton")({
    Name = "CloseButton",
    Parent = TopBar,
    BackgroundColor3 = colors.error,
    BackgroundTransparency = 0.8,
    Position = UDim2.new(1, -30, 0.5, -9),
    Size = UDim2.new(0, 18, 0, 18),
    Image = "rbxassetid://6764432408", -- X icon
    ImageColor3 = colors.text,
    ImageTransparency = 0.2,
    AutoButtonColor = false
})

-- Add corner to close button
Create("UICorner")({
    Parent = CloseButton,
    CornerRadius = UDim.new(1, 0)
})

-- Minimize button
local MinimizeButton = Create("ImageButton")({
    Name = "MinimizeButton",
    Parent = TopBar,
    BackgroundColor3 = colors.warning,
    BackgroundTransparency = 0.8,
    Position = UDim2.new(1, -60, 0.5, -9),
    Size = UDim2.new(0, 18, 0, 18),
    Image = "rbxassetid://6764432138", -- Minimize icon
    ImageColor3 = colors.text,
    ImageTransparency = 0.2,
    AutoButtonColor = false
})

-- Add corner to minimize button
Create("UICorner")({
    Parent = MinimizeButton,
    CornerRadius = UDim.new(1, 0)
})

-- Main content area
local ContentFrame = Create("Frame")({
    Name = "ContentFrame",
    Parent = MainFrame,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, config.titlebarHeight),
    Size = UDim2.new(1, 0, 1, -config.titlebarHeight)
})

-- Side panel
local SidePanel = Create("Frame")({
    Name = "SidePanel",
    Parent = ContentFrame,
    BackgroundColor3 = colors.backgroundAlt,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(0, config.sidebarWidth, 1, 0)
})

-- Add gradient to side panel
local SideGradient = Create("UIGradient")({
    Parent = SidePanel,
    Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, colors.backgroundAlt),
        ColorSequenceKeypoint.new(1, colors.backgroundAlt:Lerp(colors.background, 0.3))
    }),
    Rotation = 0
})

-- Add separator line
local SideSeparator = Create("Frame")({
    Name = "Separator",
    Parent = SidePanel,
    BackgroundColor3 = colors.accent,
    BorderSizePixel = 0,
    Position = UDim2.new(1, -1, 0, 0),
    Size = UDim2.new(0, 1, 1, 0),
    Transparency = 0.7
})

-- Main content area
local MainContent = Create("Frame")({
    Name = "MainContent",
    Parent = ContentFrame,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, config.sidebarWidth, 0, 0),
    Size = UDim2.new(1, -config.sidebarWidth, 1, 0)
})

-- Create tab buttons container
local NavButtons = Create("Frame")({
    Name = "NavButtons",
    Parent = SidePanel,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 10),
    Size = UDim2.new(1, 0, 1, -20)
})

-- Create button layout
local NavLayout = Create("UIListLayout")({
    Parent = NavButtons,
    FillDirection = Enum.FillDirection.Vertical,
    HorizontalAlignment = Enum.HorizontalAlignment.Center,
    SortOrder = Enum.SortOrder.LayoutOrder,
    Padding = UDim.new(0, 15)
})

-- Create tabs
local HomeTab = Create("ScrollingFrame")({
    Name = "HomeTab",
    Parent = MainContent,
    Active = true,
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 1, 0),
    ScrollBarThickness = 4,
    ScrollBarImageColor3 = colors.accent,
    CanvasSize = UDim2.new(0, 0, 0, 0),
    Visible = true
})

local GamesTab = Create("ScrollingFrame")({
    Name = "GamesTab",
    Parent = MainContent,
    Active = true,
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 1, 0),
    ScrollBarThickness = 4,
    ScrollBarImageColor3 = colors.accent,
    CanvasSize = UDim2.new(0, 0, 0, 0),
    Visible = false
})

local CreditsTab = Create("ScrollingFrame")({
    Name = "CreditsTab",
    Parent = MainContent,
    Active = true,
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 1, 0),
    ScrollBarThickness = 4,
    ScrollBarImageColor3 = colors.accent,
    CanvasSize = UDim2.new(0, 0, 0, 0),
    Visible = false
})

local SettingsTab = Create("ScrollingFrame")({
    Name = "SettingsTab",
    Parent = MainContent,
    Active = true,
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 1, 0),
    ScrollBarThickness = 4,
    ScrollBarImageColor3 = colors.accent,
    CanvasSize = UDim2.new(0, 0, 0, 0),
    Visible = false
})

-- Add layouts to tabs
local HomeLayout = Create("UIListLayout")({
    Parent = HomeTab,
    FillDirection = Enum.FillDirection.Vertical,
    HorizontalAlignment = Enum.HorizontalAlignment.Center,
    SortOrder = Enum.SortOrder.LayoutOrder,
    Padding = UDim.new(0, 15)
})

local GamesLayout = Create("UIListLayout")({
    Parent = GamesTab,
    FillDirection = Enum.FillDirection.Vertical,
    HorizontalAlignment = Enum.HorizontalAlignment.Center,
    SortOrder = Enum.SortOrder.LayoutOrder,
    Padding = UDim.new(0, 15)
})

local CreditsLayout = Create("UIListLayout")({
    Parent = CreditsTab,
    FillDirection = Enum.FillDirection.Vertical,
    HorizontalAlignment = Enum.HorizontalAlignment.Center,
    SortOrder = Enum.SortOrder.LayoutOrder,
    Padding = UDim.new(0, 15)
})

local SettingsLayout = Create("UIListLayout")({
    Parent = SettingsTab,
    FillDirection = Enum.FillDirection.Vertical,
    HorizontalAlignment = Enum.HorizontalAlignment.Center,
    SortOrder = Enum.SortOrder.LayoutOrder,
    Padding = UDim.new(0, 15)
})

-- Add padding to tabs
local function AddPadding(parent)
    Create("UIPadding")({
        Parent = parent,
        PaddingTop = UDim.new(0, 15),
        PaddingBottom = UDim.new(0, 15)
    })
end

AddPadding(HomeTab)
AddPadding(GamesTab)
AddPadding(CreditsTab)
AddPadding(SettingsTab)

-- UI COMPONENTS

-- Function to create a modern nav button
local function CreateNavButton(name, icon, tooltip, order)
    local button = Create("ImageButton")({
        Name = name .. "Button",
        Parent = NavButtons,
        BackgroundColor3 = colors.backgroundLight,
        BackgroundTransparency = 0.8,
        BorderSizePixel = 0,
        Position = UDim2.new(0.5, -config.buttonSize/2, 0, 0),
        Size = UDim2.new(0, config.buttonSize, 0, config.buttonSize),
        Image = icon,
        ImageColor3 = colors.textDim,
        AutoButtonColor = false,
        LayoutOrder = order
    })
    
    -- Add corner radius
    local buttonCorner = Create("UICorner")({
        Parent = button,
        CornerRadius = UDim.new(0, 6)
    })
    
    -- Add selection indicator
    local indicator = Create("Frame")({
        Name = "Indicator",
        Parent = button,
        BackgroundColor3 = colors.accent,
        BorderSizePixel = 0,
        Position = UDim2.new(0, -2, 0.5, -10),
        Size = UDim2.new(0, 3, 0, 20),
        Visible = false
    })
    
    -- Round the indicator corners
    Create("UICorner")({
        Parent = indicator,
        CornerRadius = UDim.new(0, 2)
    })
    
    -- Add glow effect
    local glow = Create("ImageLabel")({
        Name = "Glow",
        Parent = button,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, -5, 0, -5),
        Size = UDim2.new(1, 10, 1, 10),
        Image = "rbxassetid://5028857084", -- Glow texture
        ImageColor3 = colors.accent,
        ImageTransparency = 1,
        ZIndex = 0
    })
    
    -- Hover and click effects
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(config.animSpeedFast), {
            BackgroundTransparency = 0.6,
            ImageColor3 = colors.text
        }):Play()
        
        TweenService:Create(glow, TweenInfo.new(config.animSpeedFast), {
            ImageTransparency = 0.7
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        if not indicator.Visible then
            TweenService:Create(button, TweenInfo.new(config.animSpeedFast), {
                BackgroundTransparency = 0.8,
                ImageColor3 = colors.textDim
            }):Play()
            
            TweenService:Create(glow, TweenInfo.new(config.animSpeedFast), {
                ImageTransparency = 1
            }):Play()
        end
    end)
    
    return button, indicator
end

-- Function to create a section header
local function CreateHeader(parent, text, order)
    local headerFrame = Create("Frame")({
        Name = text .. "Header",
        Parent = parent,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -40, 0, 40),
        LayoutOrder = order
    })
    
    local headerText = Create("TextLabel")({
        Name = "HeaderText",
        Parent = headerFrame,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 0, 0, 0),
        Size = UDim2.new(1, 0, 0, 30),
        Font = Enum.Font.GothamBold,
        Text = text,
        TextColor3 = colors.text,
        TextSize = 20,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local headerLine = Create("Frame")({
        Name = "Line",
        Parent = headerFrame,
        BackgroundColor3 = colors.backgroundLight,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 32),
        Size = UDim2.new(1, 0, 0, 1)
    })
    
    local headerAccent = Create("Frame")({
        Name = "Accent",
        Parent = headerFrame,
        BackgroundColor3 = colors.accent,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 32),
        Size = UDim2.new(0, 0, 0, 2)
    })
    
    -- Animate the accent line
    TweenService:Create(headerAccent, TweenInfo.new(config.animSpeedSlow, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
        Size = UDim2.new(0.3, 0, 0, 2)
    }):Play()
    
    return headerFrame
end

-- Function to create a card container
local function CreateCard(parent, title, description, order)
    local card = Create("Frame")({
        Name = title .. "Card",
        Parent = parent,
        BackgroundColor3 = colors.backgroundAlt,
        BackgroundTransparency = 0.2,
        BorderSizePixel = 0,
        Size = UDim2.new(1, -40, 0, description and 120 or 80),
        LayoutOrder = order
    })
    
    -- Add corner radius
    local cardCorner = Create("UICorner")({
        Parent = card,
        CornerRadius = UDim.new(0, config.cornerRadius)
    })
    
    -- Add glossy stroke
    local cardStroke = Create("UIStroke")({
        Parent = card,
        ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
        Color = colors.accent,
        Thickness = config.borderWidth,
        Transparency = 0.7
    })
    
    -- Add subtle gradient for depth
    local cardGradient = Create("UIGradient")({
        Parent = card,
        Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, colors.backgroundAlt),
            ColorSequenceKeypoint.new(1, colors.backgroundAlt:Lerp(colors.background, 0.3))
        }),
        Rotation = 45
    })
    
    local cardTitle = Create("TextLabel")({
        Name = "Title",
        Parent = card,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 15, 0, 10),
        Size = UDim2.new(1, -30, 0, 24),
        Font = Enum.Font.GothamBold,
        Text = title,
        TextColor3 = colors.accent,
        TextSize = 18,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local content = Create("Frame")({
        Name = "Content",
        Parent = card,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 15, 0, description and 65 or 40),
        Size = UDim2.new(1, -30, 0, 0) -- Will be sized by content
    })
    
    if description then
        local cardDesc = Create("TextLabel")({
            Name = "Description",
            Parent = card,
            BackgroundTransparency = 1,
            Position = UDim2.new(0, 15, 0, 35),
            Size = UDim2.new(1, -30, 0, 30),
            Font = Enum.Font.Gotham,
            Text = description,
            TextColor3 = colors.textDim,
            TextSize = 14,
            TextWrapped = true,
            TextXAlignment = Enum.TextXAlignment.Left
        })
    end
    
    -- Hover effects
    card.MouseEnter:Connect(function()
        TweenService:Create(cardStroke, TweenInfo.new(config.animSpeed), {
            Transparency = 0.4
        }):Play()
    end)
    
    card.MouseLeave:Connect(function()
        TweenService:Create(cardStroke, TweenInfo.new(config.animSpeed), {
            Transparency = 0.7
        }):Play()
    end)
    
    return card, content
end

-- Function to create a modern button
local function CreateButton(parent, text, callback, isAccent, position, size)
    local button = Create("TextButton")({
        Name = text .. "Button",
        Parent = parent,
        BackgroundColor3 = isAccent and colors.accent or colors.backgroundLight,
        BorderSizePixel = 0,
        Position = position or UDim2.new(0, 0, 0, 0),
        Size = size or UDim2.new(1, 0, 0, 36),
        Font = Enum.Font.GothamBold,
        Text = text,
        TextColor3 = isAccent and colors.background or colors.text,
        TextSize = 14,
        AutoButtonColor = false
    })
    
    -- Add corner radius
    local buttonCorner = Create("UICorner")({
        Parent = button,
        CornerRadius = UDim.new(0, config.cornerRadius)
    })
    
    -- Add gradient for 3D effect
    local buttonGradient = Create("UIGradient")({
        Parent = button,
        Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, isAccent and colors.accentBright or colors.backgroundLight:Lerp(colors.backgroundAlt, 0.3)),
            ColorSequenceKeypoint.new(1, isAccent and colors.accentGradient or colors.backgroundLight)
        }),
        Rotation = 90
    })
    
    -- Add glow effect
    local buttonGlow = Create("ImageLabel")({
        Name = "Glow",
        Parent = button,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, -5, 0, -5),
        Size = UDim2.new(1, 10, 1, 10),
        Image = "rbxassetid://5028857084", -- Glow texture
        ImageColor3 = isAccent and colors.accent or colors.backgroundLight,
        ImageTransparency = 0.8,
        ZIndex = -1
    })
    
    -- Hover effect
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(config.animSpeedFast), {
            Size = size * 1.02,
            Position = position - (size * 0.02)/2
        }):Play()
        
        TweenService:Create(buttonGlow, TweenInfo.new(config.animSpeedFast), {
            ImageTransparency = 0.6,
            Size = UDim2.new(1, 15, 1, 15),
            Position = UDim2.new(0, -7.5, 0, -7.5)
        }):Play()
        
        TweenService:Create(buttonGradient, TweenInfo.new(config.animSpeedFast), {
            Offset = Vector2.new(0, -0.1)
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(config.animSpeedFast), {
            Size = size,
            Position = position
        }):Play()
        
        TweenService:Create(buttonGlow, TweenInfo.new(config.animSpeedFast), {
            ImageTransparency = 0.8,
            Size = UDim2.new(1, 10, 1, 10),
            Position = UDim2.new(0, -5, 0, -5)
        }):Play()
        
        TweenService:Create(buttonGradient, TweenInfo.new(config.animSpeedFast), {
            Offset = Vector2.new(0, 0)
        }):Play()
    end)
    
    -- Click effect
    button.MouseButton1Down:Connect(function()
        TweenService:Create(button, TweenInfo.new(config.animSpeedFast), {
            Size = size * 0.96,
            Position = position + (size * 0.04)/2
        }):Play()
    end)
    
    button.MouseButton1Up:Connect(function()
        TweenService:Create(button, TweenInfo.new(config.animSpeedFast), {
            Size = size,
            Position = position
        }):Play()
    end)
    
    button.MouseButton1Click:Connect(function()
        if callback then callback() end
    end)
    
    return button
end

-- Function to create a toggle switch
local function CreateToggle(parent, text, description, default, callback)
    local toggleFrame = Create("Frame")({
        Name = text .. "Toggle",
        Parent = parent,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, 60)
    })
    
    local toggleTitle = Create("TextLabel")({
        Name = "Title",
        Parent = toggleFrame,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 0, 0, 0),
        Size = UDim2.new(1, -70, 0, 20),
        Font = Enum.Font.GothamBold,
        Text = text,
        TextColor3 = colors.text,
        TextSize = 16,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local toggleDesc = Create("TextLabel")({
        Name = "Description",
        Parent = toggleFrame,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 0, 0, 25),
        Size = UDim2.new(1, -70, 0, 30),
        Font = Enum.Font.Gotham,
        Text = description,
        TextColor3 = colors.textDim,
        TextSize = 14,
        TextWrapped = true,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local toggleButton = Create("TextButton")({
        Name = "ToggleButton",
        Parent = toggleFrame,
        BackgroundColor3 = default and colors.accent or colors.backgroundLight,
        BorderSizePixel = 0,
        Position = UDim2.new(1, -60, 0, 15),
        Size = UDim2.new(0, 50, 0, 26),
        Text = "",
        AutoButtonColor = false
    })
    
    -- Add corner radius
    local toggleCorner = Create("UICorner")({
        Parent = toggleButton,
        CornerRadius = UDim.new(1, 0)
    })
    
    local toggleCircle = Create("Frame")({
        Name = "Circle",
        Parent = toggleButton,
        BackgroundColor3 = colors.text,
        BorderSizePixel = 0,
        Position = default and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 4, 0.5, -10),
        Size = UDim2.new(0, 20, 0, 20),
        ZIndex = 2
    })
    
    -- Add corner radius to circle
    local circleCorner = Create("UICorner")({
        Parent = toggleCircle,
        CornerRadius = UDim.new(1, 0)
    })
    
    -- Add subtle shadow to circle
    local circleShadow = Create("ImageLabel")({
        Name = "Shadow",
        Parent = toggleCircle,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, -2, 0, -2),
        Size = UDim2.new(1, 4, 1, 4),
        Image = "rbxassetid://5028857084",
        ImageColor3 = colors.shadow,
        ImageTransparency = 0.6,
        ZIndex = 1
    })
    
    -- Track toggle state
    local enabled = default
    
    -- Toggle functionality
    toggleButton.MouseButton1Click:Connect(function()
        enabled = not enabled
        
        -- Animate the toggle switch
        TweenService:Create(toggleButton, TweenInfo.new(config.animSpeed), {
            BackgroundColor3 = enabled and colors.accent or colors.backgroundLight
        }):Play()
        
        TweenService:Create(toggleCircle, TweenInfo.new(config.animSpeed), {
            Position = enabled and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 4, 0.5, -10)
        }):Play()
        
        if callback then callback(enabled) end
    end)
    
    return toggleFrame, enabled
end

-- Function to create a modern dropdown
local function CreateDropdown(parent, text, options, default, callback)
    local dropFrame = Create("Frame")({
        Name = text .. "Dropdown",
        Parent = parent,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, 70)
    })
    
    local dropTitle = Create("TextLabel")({
        Name = "Title",
        Parent = dropFrame,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 0, 0, 0),
        Size = UDim2.new(1, 0, 0, 25),
        Font = Enum.Font.GothamBold,
        Text = text,
        TextColor3 = colors.text,
        TextSize = 16,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local dropButton = Create("TextButton")({
        Name = "Button",
        Parent = dropFrame,
        BackgroundColor3 = colors.backgroundLight,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 30),
        Size = UDim2.new(1, 0, 0, 36),
        Font = Enum.Font.Gotham,
        Text = "  " .. (default or "Select option..."),
        TextColor3 = colors.text,
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left,
        AutoButtonColor = false
    })
    
    -- Add corner radius
    local buttonCorner = Create("UICorner")({
        Parent = dropButton,
        CornerRadius = UDim.new(0, config.cornerRadius)
    })
    
    -- Add gradient
    local buttonGradient = Create("UIGradient")({
        Parent = dropButton,
        Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, colors.backgroundLight:Lerp(colors.backgroundAlt, 0.3)),
            ColorSequenceKeypoint.new(1, colors.backgroundLight)
        }),
        Rotation = 90
    })
    
    -- Add dropdown arrow
    local dropArrow = Create("ImageLabel")({
        Name = "Arrow",
        Parent = dropButton,
        BackgroundTransparency = 1,
        Position = UDim2.new(1, -30, 0.5, -8),
        Size = UDim2.new(0, 16, 0, 16),
        Image = "rbxassetid://6031091004", -- Dropdown arrow
        ImageColor3 = colors.text,
        Rotation = 0
    })
    
    -- Create dropdown list container
    local dropList = Create("Frame")({
        Name = "List",
        Parent = dropFrame,
        BackgroundColor3 = colors.backgroundLight,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 70),
        Size = UDim2.new(1, 0, 0, 0), -- Start closed
        ClipsDescendants = true,
        Visible = false,
        ZIndex = 10
    })
    
    -- Add corner radius
    local listCorner = Create("UICorner")({
        Parent = dropList,
        CornerRadius = UDim.new(0, config.cornerRadius)
    })
    
    -- Add list layout
    local listLayout = Create("UIListLayout")({
        Parent = dropList,
        FillDirection = Enum.FillDirection.Vertical,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 2)
    })
    
    -- Track selected option and open state
    local selectedOption = default
    local isOpen = false
    
    -- Create option buttons
    for i, option in ipairs(options) do
        local optionButton = Create("TextButton")({
            Name = option .. "Option",
            Parent = dropList,
            BackgroundColor3 = colors.backgroundAlt,
            BorderSizePixel = 0,
            Size = UDim2.new(1, 0, 0, 32),
            Font = Enum.Font.Gotham,
            Text = "  " .. option,
            TextColor3 = colors.text,
            TextSize = 14,
            TextXAlignment = Enum.TextXAlignment.Left,
            LayoutOrder = i,
            ZIndex = 11,
            AutoButtonColor = false
        })
        
        -- Add corner radius
        Create("UICorner")({
            Parent = optionButton,
            CornerRadius = UDim.new(0, config.cornerRadius/2)
        })
        
        -- Hover effect
        optionButton.MouseEnter:Connect(function()
            TweenService:Create(optionButton, TweenInfo.new(config.animSpeedFast), {
                BackgroundColor3 = colors.backgroundAlt:Lerp(colors.accent, 0.2)
            }):Play()
        end)
        
        optionButton.MouseLeave:Connect(function()
            TweenService:Create(optionButton, TweenInfo.new(config.animSpeedFast), {
                BackgroundColor3 = colors.backgroundAlt
            }):Play()
        end)
        
        -- Selection
        optionButton.MouseButton1Click:Connect(function()
            selectedOption = option
            dropButton.Text = "  " .. option
            
            -- Close the dropdown
            isOpen = false
            TweenService:Create(dropList, TweenInfo.new(config.animSpeed), {
                Size = UDim2.new(1, 0, 0, 0)
            }):Play()
            
            TweenService:Create(dropArrow, TweenInfo.new(config.animSpeed), {
                Rotation = 0
            }):Play()
            
            wait(config.animSpeed)
            dropList.Visible = false
            
            if callback then callback(option) end
        end)
    end
    
    -- Toggle dropdown
    dropButton.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        
        if isOpen then
            -- Open the dropdown
            dropList.Visible = true
            local listSize = math.min(150, #options * 34) -- Cap the height
            
            TweenService:Create(dropList, TweenInfo.new(config.animSpeed), {
                Size = UDim2.new(1, 0, 0, listSize)
            }):Play()
            
            TweenService:Create(dropArrow, TweenInfo.new(config.animSpeed), {
                Rotation = 180
            }):Play()
        else
            -- Close the dropdown
            TweenService:Create(dropList, TweenInfo.new(config.animSpeed), {
                Size = UDim2.new(1, 0, 0, 0)
            }):Play()
            
            TweenService:Create(dropArrow, TweenInfo.new(config.animSpeed), {
                Rotation = 0
            }):Play()
            
            wait(config.animSpeed)
            dropList.Visible = false
        end
    end)
    
    -- Close when clicking elsewhere
    UserInputService.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 and isOpen then
            local mousePos = UserInputService:GetMouseLocation()
            local dropBounds = {
                min = dropButton.AbsolutePosition,
                max = dropButton.AbsolutePosition + dropButton.AbsoluteSize
            }
            
            local listBounds = {
                min = dropList.AbsolutePosition,
                max = dropList.AbsolutePosition + dropList.AbsoluteSize
            }
            
            -- Check if click is outside both the button and list
            if not (
                mousePos.X >= dropBounds.min.X and
                mousePos.X <= dropBounds.max.X and
                mousePos.Y >= dropBounds.min.Y and
                mousePos.Y <= dropBounds.max.Y
            ) and not (
                mousePos.X >= listBounds.min.X and
                mousePos.X <= listBounds.max.X and
                mousePos.Y >= listBounds.min.Y and
                mousePos.Y <= listBounds.max.Y
            ) then
                -- Close the dropdown
                isOpen = false
                TweenService:Create(dropList, TweenInfo.new(config.animSpeed), {
                    Size = UDim2.new(1, 0, 0, 0)
                }):Play()
                
                TweenService:Create(dropArrow, TweenInfo.new(config.animSpeed), {
                    Rotation = 0
                }):Play()
                
                wait(config.animSpeed)
                dropList.Visible = false
            end
        end
    end)
    
    return dropFrame, selectedOption
end

-- Function to create a game button
local function CreateGameButton(parent, name, description, scriptUrl, gameName, order)
    local button = Create("Frame")({
        Name = gameName .. "Button",
        Parent = parent,
        BackgroundColor3 = colors.backgroundAlt,
        BackgroundTransparency = 0.2,
        BorderSizePixel = 0,
        Size = UDim2.new(1, -40, 0, 80),
        LayoutOrder = order
    })
    
    -- Add corner radius
    local buttonCorner = Create("UICorner")({
        Parent = button,
        CornerRadius = UDim.new(0, config.cornerRadius)
    })
    
    -- Add glossy stroke
    local buttonStroke = Create("UIStroke")({
        Parent = button,
        ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
        Color = colors.accent,
        Thickness = config.borderWidth,
        Transparency = 0.8
    })
    
    -- Add subtle gradient
    local buttonGradient = Create("UIGradient")({
        Parent = button,
        Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, colors.backgroundAlt),
            ColorSequenceKeypoint.new(1, colors.backgroundAlt:Lerp(colors.background, 0.3))
        }),
        Rotation = 45
    })
    
    local gameIcon = Create("ImageLabel")({
        Name = "Icon",
        Parent = button,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 15, 0.5, -15),
        Size = UDim2.new(0, 30, 0, 30),
        Image = "rbxassetid://7743878966", -- Game controller icon
        ImageColor3 = colors.accent
    })
    
    local gameTitle = Create("TextLabel")({
        Name = "Title",
        Parent = button,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 55, 0, 15),
        Size = UDim2.new(1, -170, 0, 20),
        Font = Enum.Font.GothamBold,
        Text = name,
        TextColor3 = colors.text,
        TextSize = 16,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local gameDesc = Create("TextLabel")({
        Name = "Description",
        Parent = button,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 55, 0, 40),
        Size = UDim2.new(1, -170, 0, 30),
        Font = Enum.Font.Gotham,
        Text = description or "Script for " .. gameName,
        TextColor3 = colors.textDim,
        TextSize = 14,
        TextWrapped = true,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local executeBtn = CreateButton(
        button,
        "EXECUTE",
        function()
            pcall(function()
                loadstring(game:HttpGet(scriptUrl, true))()
            end)
            
            Notify(gameName, "Script loaded successfully!", 3, "success")
        end,
        true,
        UDim2.new(1, -110, 0.5, -18),
        UDim2.new(0, 100, 0, 36)
    )
    
    -- Add hover effects
    button.MouseEnter:Connect(function()
        TweenService:Create(buttonStroke, TweenInfo.new(config.animSpeed), {
            Transparency = 0.5
        }):Play()
        
        TweenService:Create(gameTitle, TweenInfo.new(config.animSpeed), {
            Position = UDim2.new(0, 60, 0, 15)
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(buttonStroke, TweenInfo.new(config.animSpeed), {
            Transparency = 0.8
        }):Play()
        
        TweenService:Create(gameTitle, TweenInfo.new(config.animSpeed), {
            Position = UDim2.new(0, 55, 0, 15)
        }):Play()
    end)
    
    return button
end

-- Minimized button (shown when UI is minimized)
local MinimizedButton = Create("Frame")({
    Name = "MinimizedButton",
    Parent = LAJHub,
    BackgroundColor3 = colors.background,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 20, 0, 20),
    Size = UDim2.new(0, 150, 0, 40),
    Visible = false,
    ZIndex = 10,
    Active = true,
    Draggable = true
})

-- Add corner radius
local MinimizedCorner = Create("UICorner")({
    Parent = MinimizedButton,
    CornerRadius = UDim.new(0, config.cornerRadius)
})

-- Add glossy stroke
local MinimizedStroke = Create("UIStroke")({
    Parent = MinimizedButton,
    ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
    Color = colors.accent,
    Thickness = config.borderWidth,
    Transparency = 0.3
})

-- Add glow effect
local MinimizedGlow = Create("ImageLabel")({
    Name = "Glow",
    Parent = MinimizedButton,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, -10, 0, -10),
    Size = UDim2.new(1, 20, 1, 20),
    Image = "rbxassetid://5028857084", -- Glow texture
    ImageColor3 = colors.accent,
    ImageTransparency = 0.7,
    ZIndex = 9
})

local MinimizedIcon = Create("ImageLabel")({
    Name = "Icon",
    Parent = MinimizedButton,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 10, 0.5, -10),
    Size = UDim2.new(0, 20, 0, 20),
    Image = "rbxassetid://7743878358", -- Logo
    ImageColor3 = colors.accent,
    ZIndex = 12
})

local MinimizedLabel = Create("TextLabel")({
    Name = "Label",
    Parent = MinimizedButton,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 40, 0, 0),
    Size = UDim2.new(1, -50, 1, 0),
    Font = Enum.Font.GothamBold,
    Text = "LAJ HUB",
    TextColor3 = colors.accent,
    TextSize = 16,
    ZIndex = 12
})

-- Add pulsing animation to minimized button
spawn(function()
    while MinimizedButton and MinimizedButton.Parent do
        TweenService:Create(MinimizedGlow, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            ImageTransparency = 0.5,
            Size = UDim2.new(1, 30, 1, 30),
            Position = UDim2.new(0, -15, 0, -15)
        }):Play()
        
        wait(1.5)
        
        if not MinimizedButton or not MinimizedButton.Parent then break end
        
        TweenService:Create(MinimizedGlow, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            ImageTransparency = 0.7,
            Size = UDim2.new(1, 20, 1, 20),
            Position = UDim2.new(0, -10, 0, -10)
        }):Play()
        
        wait(1.5)
    end
end)

-- Function to create a notification
local function Notify(title, message, duration, notifType)
    local notifColors = {
        success = colors.success,
        error = colors.error,
        warning = colors.warning,
        info = colors.accentSecondary,
        default = colors.accent
    }
    
    local color = notifColors[notifType] or notifColors.default
    
    local notification = Create("Frame")({
        Name = "Notification",
        Parent = LAJHub,
        BackgroundColor3 = colors.backgroundAlt,
        BorderSizePixel = 0,
        Position = UDim2.new(1, 10, 0.75, -40),
        Size = UDim2.new(0, 260, 0, 80),
        ZIndex = 100
    })
    
    -- Add corner radius
    local notifCorner = Create("UICorner")({
        Parent = notification,
        CornerRadius = UDim.new(0, config.cornerRadius)
    })
    
    -- Add glossy stroke
    local notifStroke = Create("UIStroke")({
        Parent = notification,
        ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
        Color = color,
        Thickness = config.borderWidth,
        Transparency = 0.3
    })
    
    -- Add glow effect
    local notifGlow = Create("ImageLabel")({
        Name = "Glow",
        Parent = notification,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, -8, 0, -8),
        Size = UDim2.new(1, 16, 1, 16),
        Image = "rbxassetid://5028857084", -- Glow texture
        ImageColor3 = color,
        ImageTransparency = 0.8,
        ZIndex = 99
    })
    
    local notifHeader = Create("Frame")({
        Name = "Header",
        Parent = notification,
        BackgroundColor3 = color,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 28),
        ZIndex = 101
    })
    
    -- Add corner radius to header
    local headerCorner = Create("UICorner")({
        Parent = notifHeader,
        CornerRadius = UDim.new(0, config.cornerRadius)
    })
    
    -- Fix corners at bottom of header
    local headerFix = Create("Frame")({
        Name = "Fix",
        Parent = notifHeader,
        BackgroundColor3 = color,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0.5, 0),
        Size = UDim2.new(1, 0, 0.5, 0),
        ZIndex = 101
    })
    
    local headerTitle = Create("TextLabel")({
        Name = "Title",
        Parent = notifHeader,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 10, 0, 0),
        Size = UDim2.new(1, -20, 1, 0),
        Font = Enum.Font.GothamBold,
        Text = title,
        TextColor3 = colors.text,
        TextSize = 14,
        ZIndex = 102
    })
    
    local notifMessage = Create("TextLabel")({
        Name = "Message",
        Parent = notification,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 10, 0, 34),
        Size = UDim2.new(1, -20, 0, 36),
        Font = Enum.Font.Gotham,
        Text = message,
        TextColor3 = colors.text,
        TextSize = 14,
        TextWrapped = true,
        ZIndex = 101
    })
    
    -- Add progress bar
    local progressBar = Create("Frame")({
        Name = "ProgressBar",
        Parent = notification,
        BackgroundColor3 = colors.backgroundLight,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 10, 1, -10),
        Size = UDim2.new(1, -20, 0, 3),
        ZIndex = 101
    })
    
    -- Add corner radius to progress bar
    local progressCorner = Create("UICorner")({
        Parent = progressBar,
        CornerRadius = UDim.new(1, 0)
    })
    
    local progressFill = Create("Frame")({
        Name = "Fill",
        Parent = progressBar,
        BackgroundColor3 = color,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 1, 0),
        ZIndex = 102
    })
    
    -- Add corner radius to fill
    local fillCorner = Create("UICorner")({
        Parent = progressFill,
        CornerRadius = UDim.new(1, 0)
    })
    
    -- Slide in animation
    notification:TweenPosition(UDim2.new(1, -280, 0.75, -40), "Out", "Quart", 0.5, true)
    
    -- Progress bar animation
    TweenService:Create(progressFill, TweenInfo.new(duration or 3, Enum.EasingStyle.Linear), {
        Size = UDim2.new(0, 0, 1, 0)
    }):Play()
    
    -- Enhance glow on enter
    TweenService:Create(notifGlow, TweenInfo.new(0.5), {
        ImageTransparency = 0.6
    }):Play()
    
    -- Auto close
    delay(duration or 3, function()
        -- Fade out glow
        TweenService:Create(notifGlow, TweenInfo.new(0.5), {
            ImageTransparency = 0.8
        }):Play()
        
        -- Slide out animation
        notification:TweenPosition(UDim2.new(1, 10, 0.75, -40), "In", "Quart", 0.5, true, function()
            notification:Destroy()
        end)
    end)
    
    return notification
end

-- POPULATE UI CONTENT

-- Create navigation buttons
local homeBtn, homeIndicator = CreateNavButton(
    "Home", 
    "rbxassetid://7733960981", -- Home icon
    "Home", 
    1
)
homeIndicator.Visible = true
homeBtn.ImageColor3 = colors.text
homeBtn.BackgroundTransparency = 0.6

local gamesBtn, gamesIndicator = CreateNavButton(
    "Games", 
    "rbxassetid://7734042071", -- Game controller icon
    "Game Scripts", 
    2
)

local creditsBtn, creditsIndicator = CreateNavButton(
    "Credits", 
    "rbxassetid://7734110748", -- Info icon
    "Credits", 
    3
)

local settingsBtn, settingsIndicator = CreateNavButton(
    "Settings", 
    "rbxassetid://7734053495", -- Settings icon
    "Settings", 
    4
)

-- HOME TAB CONTENT
local welcomeHeader = CreateHeader(HomeTab, "Welcome", 1)

local welcomeCard, welcomeContent = CreateCard(HomeTab, "LAJ HUB", "The premium script hub for Roblox games. Select a script from the Games tab to get started.", 2)
welcomeCard.Size = UDim2.new(1, -40, 0, 120)

-- Create logo display
local logoDisplay = Create("ImageLabel")({
    Name = "LogoDisplay",
    Parent = welcomeContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, -50, 0, 0),
    Size = UDim2.new(0, 100, 0, 100),
    Image = "rbxassetid://7743878358", -- Logo image
    ImageColor3 = colors.accent
})

-- Add glow to logo
local logoGlow = Create("ImageLabel")({
    Name = "LogoGlow",
    Parent = logoDisplay,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, -10, 0, -10),
    Size = UDim2.new(1, 20, 1, 20),
    Image = "rbxassetid://5028857084", -- Glow texture
    ImageColor3 = colors.accent,
    ImageTransparency = 0.6,
    ZIndex = 0
})

-- Add float animation to logo
spawn(function()
    while logoDisplay and logoDisplay.Parent do
        TweenService:Create(logoDisplay, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            Position = UDim2.new(0.5, -50, 0, 5)
        }):Play()
        
        wait(2)
        
        if not logoDisplay or not logoDisplay.Parent then break end
        
        TweenService:Create(logoDisplay, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            Position = UDim2.new(0.5, -50, 0, -5)
        }):Play()
        
        wait(2)
    end
end)

-- Quick access section
local quickAccessHeader = CreateHeader(HomeTab, "Quick Access", 3)

local quickAccessCard, quickContent = CreateCard(HomeTab, "Popular Scripts", nil, 4)
quickAccessCard.Size = UDim2.new(1, -40, 0, 100)

-- Create quick access buttons
local bloxFruitsBtn = CreateButton(
    quickContent,
    "Blox Fruits",
    function()
        -- Execute Blox Fruits script
        pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
        end)
        
        Notify("Blox Fruits", "Script loaded successfully!", 3, "success")
    end,
    true,
    UDim2.new(0, 0, 0, 0),
    UDim2.new(0.48, 0, 0, 36)
)

local deadRailsBtn = CreateButton(
    quickContent,
    "Dead Rails",
    function()
        -- Execute Dead Rails script
        pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
        end)
        
        Notify("Dead Rails", "Script loaded successfully!", 3, "success")
    end,
    false,
    UDim2.new(0.52, 0, 0, 0),
    UDim2.new(0.48, 0, 0, 36)
)

local muscleLegendsBtn = CreateButton(
    quickContent,
    "Muscle Legends",
    function()
        -- Execute Muscle Legends script
        pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
        end)
        
        Notify("Muscle Legends", "Script loaded successfully!", 3, "success")
    end,
    true,
    UDim2.new(0, 0, 0, 46),
    UDim2.new(0.48, 0, 0, 36)
)

local animeVanguardsBtn = CreateButton(
    quickContent,
    "Anime Vanguards",
    function()
        -- Execute Anime Vanguards script
        pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Script-Games/main/Anime%20Vanguards.lua", true))()
        end)
        
        Notify("Anime Vanguards", "Script loaded successfully!", 3, "success")
    end,
    false,
    UDim2.new(0.52, 0, 0, 46),
    UDim2.new(0.48, 0, 0, 36)
)

-- Status section
local statusCard, statusContent = CreateCard(HomeTab, "Status", nil, 5)
statusCard.Size = UDim2.new(1, -40, 0, 80)

-- Add status indicator
local statusIcon = Create("Frame")({
    Name = "StatusIcon",
    Parent = statusContent,
    BackgroundColor3 = colors.success,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 5),
    Size = UDim2.new(0, 15, 0, 15)
})

-- Add corner radius to status icon
Create("UICorner")({
    Parent = statusIcon,
    CornerRadius = UDim.new(1, 0)
})

-- Add status text
local statusText = Create("TextLabel")({
    Name = "StatusText",
    Parent = statusContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 25, 0, 0),
    Size = UDim2.new(1, -25, 0, 25),
    Font = Enum.Font.GothamBold,
    Text = "Ready to use",
    TextColor3 = colors.text,
    TextSize = 16,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- Add version info
local versionText = Create("TextLabel")({
    Name = "VersionText",
    Parent = statusContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 30),
    Size = UDim2.new(1, 0, 0, 20),
    Font = Enum.Font.Gotham,
    Text = "Version: 2.0 | discord.gg/lajhub",
    TextColor3 = colors.textDim,
    TextSize = 14,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- Add pulse animation to status icon
spawn(function()
    while statusIcon and statusIcon.Parent do
        TweenService:Create(statusIcon, TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
            Size = UDim2.new(0, 12, 0, 12),
            Position = UDim2.new(0, 1.5, 0, 6.5)
        }):Play()
        
        wait(1)
        
        if not statusIcon or not statusIcon.Parent then break end
        
        TweenService:Create(statusIcon, TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
            Size = UDim2.new(0, 15, 0, 15),
            Position = UDim2.new(0, 0, 0, 5)
        }):Play()
        
        wait(1)
    end
end)

-- GAMES TAB CONTENT
local gamesHeader = CreateHeader(GamesTab, "Game Scripts", 1)

-- Search bar
local searchCard, searchContent = CreateCard(GamesTab, "Search", nil, 2)
searchCard.Size = UDim2.new(1, -40, 0, 80)

-- Add search bar
local searchBar = Create("TextBox")({
    Name = "SearchBar",
    Parent = searchContent,
    BackgroundColor3 = colors.backgroundLight,
    BorderSizePixel = 0,
    ClearTextOnFocus = false,
    Position = UDim2.new(0, 0, 0, 5),
    Size = UDim2.new(1, 0, 0, 40),
    Font = Enum.Font.Gotham,
    PlaceholderText = "Search games...",
    Text = "",
    TextColor3 = colors.text,
    TextSize = 16,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- Add corner radius to search bar
Create("UICorner")({
    Parent = searchBar,
    CornerRadius = UDim.new(0, config.cornerRadius)
})

-- Add search icon
local searchIcon = Create("ImageLabel")({
    Name = "SearchIcon",
    Parent = searchBar,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 10, 0.5, -8),
    Size = UDim2.new(0, 16, 0, 16),
    Image = "rbxassetid://7022243779", -- Search icon
    ImageColor3 = colors.textDim
})

-- Add padding to search text
Create("UIPadding")({
    Parent = searchBar,
    PaddingLeft = UDim.new(0, 36)
})

-- Game scripts section
local scriptsHeader = CreateHeader(GamesTab, "Available Scripts", 3)

-- Game scripts data
local gameScripts = {
    {
        name = "Speed Hub X - Blox Fruits",
        description = "Auto-farm, ESP, teleports, and more for Blox Fruits",
        url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua",
        game = "Blox Fruits"
    },
    {
        name = "Speed Hub X - Dead Rails",
        description = "Auto-farm, ESP, and more for Dead Rails",
        url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua",
        game = "Dead Rails"
    },
    {
        name = "Speed Hub X - Muscle Legends",
        description = "Auto-farm strength, chest ESP, and more",
        url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua",
        game = "Muscle Legends"
    },
    {
        name = "Speed Hub X - Fisch",
        description = "Teleports, auto-farm, and more for Fisch",
        url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua",
        game = "Fisch"
    },
    {
        name = "Speed Hub X - The Strongest Battlegrounds",
        description = "Auto-farm, ESP, and more for The Strongest Battlegrounds",
        url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua",
        game = "The Strongest Battlegrounds"
    },
    {
        name = "Speed Hub X - Arise Crossover",
        description = "Premium features for Arise Crossover",
        url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua",
        game = "Arise Crossover"
    },
    {
        name = "Speed Hub X - Bubble Gum Simulator",
        description = "Auto-farm, auto-hatch, teleports and more",
        url = "https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua",
        game = "Bubble Gum Simulator"
    },
    {
        name = "Speed Hub X - Anime Reborn",
        description = "Auto-farm, ESP, and more for Anime Reborn",
        url = "https://raw.githubusercontent.com/AhmadV99/Script-Games/main/Anime%20Reborn.lua",
        game = "Anime Reborn"
    },
    {
        name = "Speed Hub X - Anime Vanguards",
        description = "Auto-farm, teleports, and more for Anime Vanguards",
        url = "https://raw.githubusercontent.com/AhmadV99/Script-Games/main/Anime%20Vanguards.lua",
        game = "Anime Vanguards"
    }
}

-- Create game buttons
for i, script in ipairs(gameScripts) do
    CreateGameButton(GamesTab, script.name, script.description, script.url, script.game, i + 3)
end

-- CREDITS TAB CONTENT
local creditsHeader = CreateHeader(CreditsTab, "Credits", 1)

-- Developer info
local developerCard, developerContent = CreateCard(CreditsTab, "Developer", "Information about the developer of LAJ HUB.", 2)
developerCard.Size = UDim2.new(1, -40, 0, 120)

-- Add developer info
local developerName = Create("TextLabel")({
    Name = "DeveloperName",
    Parent = developerContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 0, 25),
    Font = Enum.Font.GothamBold,
    Text = "LAJ HUB Team",
    TextColor3 = colors.text,
    TextSize = 16,
    TextXAlignment = Enum.TextXAlignment.Left
})

local developerText = Create("TextLabel")({
    Name = "DeveloperText",
    Parent = developerContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 30),
    Size = UDim2.new(1, 0, 0, 60),
    Font = Enum.Font.Gotham,
    Text = "Developers of premium script hubs for Roblox games. Providing quality exploits since 2023.",
    TextColor3 = colors.textDim,
    TextSize = 14,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- Discord info
local discordCard, discordContent = CreateCard(CreditsTab, "Discord", "Join our Discord server for updates and support.", 3)
discordCard.Size = UDim2.new(1, -40, 0, 130)

-- Add discord info
local discordLink = Create("TextLabel")({
    Name = "DiscordLink",
    Parent = discordContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 0, 25),
    Font = Enum.Font.GothamBold,
    Text = "discord.gg/lajhub",
    TextColor3 = colors.accent,
    TextSize = 16,
    TextXAlignment = Enum.TextXAlignment.Left
})

local discordText = Create("TextLabel")({
    Name = "DiscordText",
    Parent = discordContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 30),
    Size = UDim2.new(1, 0, 0, 40),
    Font = Enum.Font.Gotham,
    Text = "Join our Discord server for script updates, support, and to connect with other users.",
    TextColor3 = colors.textDim,
    TextSize = 14,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- Add copy discord button
local copyDiscordBtn = CreateButton(
    discordContent,
    "Copy Discord Link",
    function()
        if setclipboard then
            setclipboard("discord.gg/lajhub")
            Notify("Discord", "Discord link copied to clipboard!", 3, "success")
        else
            Notify("Discord", "Copy to clipboard not supported", 3, "error")
        end
    end,
    true,
    UDim2.new(0, 0, 0, 80),
    UDim2.new(1, 0, 0, 36)
)

-- Version info
local versionCard, versionContent = CreateCard(CreditsTab, "Version", "Current version information.", 4)
versionCard.Size = UDim2.new(1, -40, 0, 100)

-- Add version info
local versionInfo = Create("TextLabel")({
    Name = "VersionInfo",
    Parent = versionContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 0, 25),
    Font = Enum.Font.GothamBold,
    Text = "LAJ HUB v2.0",
    TextColor3 = colors.accent,
    TextSize = 16,
    TextXAlignment = Enum.TextXAlignment.Left
})

local updateInfo = Create("TextLabel")({
    Name = "UpdateInfo",
    Parent = versionContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 30),
    Size = UDim2.new(1, 0, 0, 40),
    Font = Enum.Font.Gotham,
    Text = "Last Updated: April 2023\nCheck Discord for the latest updates and features.",
    TextColor3 = colors.textDim,
    TextSize = 14,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- SETTINGS TAB CONTENT
local settingsHeader = CreateHeader(SettingsTab, "Settings", 1)

-- UI Settings
local uiSettingsCard, uiContent = CreateCard(SettingsTab, "UI Settings", "Customize the user interface.", 2)
uiSettingsCard.Size = UDim2.new(1, -40, 0, 180)

-- Add toggle for auto-load
local autoLoadToggle, autoLoadEnabled = CreateToggle(
    uiContent,
    "Auto-Load Scripts",
    "Automatically load scripts when a compatible game is detected.",
    true,
    function(enabled)
        -- Auto-load scripts when enabled
    end
)

-- Add toggle for UI always on top
local topmostToggle, topmostEnabled = CreateToggle(
    uiContent,
    "UI Always On Top",
    "Keep the UI visible at all times, even when clicking elsewhere in the game.",
    true,
    function(enabled)
        -- Keep UI on top when enabled
        LAJHub.DisplayOrder = enabled and 100 or 0
    end
)
topmostToggle.Position = UDim2.new(0, 0, 0, 70)

-- Add reset button
local resetBtn = CreateButton(
    uiContent,
    "Reset All Settings",
    function()
        -- Reset all settings to default
        TweenService:Create(autoLoadToggle.ToggleButton, TweenInfo.new(config.animSpeed), {
            BackgroundColor3 = colors.accent
        }):Play()
        
        TweenService:Create(autoLoadToggle.ToggleButton.Circle, TweenInfo.new(config.animSpeed), {
            Position = UDim2.new(1, -22, 0.5, -10)
        }):Play()
        
        TweenService:Create(topmostToggle.ToggleButton, TweenInfo.new(config.animSpeed), {
            BackgroundColor3 = colors.accent
        }):Play()
        
        TweenService:Create(topmostToggle.ToggleButton.Circle, TweenInfo.new(config.animSpeed), {
            Position = UDim2.new(1, -22, 0.5, -10)
        }):Play()
        
        -- Keep UI on top
        LAJHub.DisplayOrder = 100
        
        Notify("Settings", "All settings have been reset to default values.", 3, "info")
    end,
    false,
    UDim2.new(0, 0, 0, 140),
    UDim2.new(1, 0, 0, 36)
)

-- Appearance settings
local appearanceCard, appearanceContent = CreateCard(SettingsTab, "Appearance", "Change how the UI looks.", 3)
appearanceCard.Size = UDim2.new(1, -40, 0, 140)

-- Add theme selector
local themeDropdown, selectedTheme = CreateDropdown(
    appearanceContent,
    "Theme",
    {"Dark Purple (Default)", "Cyan Blue", "Hot Pink"},
    "Dark Purple (Default)",
    function(option)
        -- Change theme based on selection
        if option == "Cyan Blue" then
            -- Update accent colors to cyan
            local accentElements = {
                NeonBorder, OuterGlow, TitleIcon, TitleLabel, IconGlow,
                MinimizedStroke, MinimizedIcon, MinimizedLabel
            }
            
            for _, element in ipairs(accentElements) do
                TweenService:Create(element, TweenInfo.new(config.animSpeed), {
                    Color = colors.accentSecondary,
                    ImageColor3 = colors.accentSecondary,
                    TextColor3 = colors.accentSecondary
                }):Play()
            end
            
            Notify("Theme", "Cyan Blue theme applied", 3, "info")
            
        elseif option == "Hot Pink" then
            -- Update accent colors to pink
            local accentElements = {
                NeonBorder, OuterGlow, TitleIcon, TitleLabel, IconGlow,
                MinimizedStroke, MinimizedIcon, MinimizedLabel
            }
            
            for _, element in ipairs(accentElements) do
                TweenService:Create(element, TweenInfo.new(config.animSpeed), {
                    Color = colors.accentTertiary,
                    ImageColor3 = colors.accentTertiary,
                    TextColor3 = colors.accentTertiary
                }):Play()
            end
            
            Notify("Theme", "Hot Pink theme applied", 3, "info")
            
        else
            -- Reset to default purple
            local accentElements = {
                NeonBorder, OuterGlow, TitleIcon, TitleLabel, IconGlow,
                MinimizedStroke, MinimizedIcon, MinimizedLabel
            }
            
            for _, element in ipairs(accentElements) do
                TweenService:Create(element, TweenInfo.new(config.animSpeed), {
                    Color = colors.accent,
                    ImageColor3 = colors.accent,
                    TextColor3 = colors.accent
                }):Play()
            end
            
            Notify("Theme", "Dark Purple theme applied", 3, "info")
        end
    end
)

-- Add reset UI button
local resetThemeBtn = CreateButton(
    appearanceContent,
    "Reset Appearance",
    function()
        -- Reset theme to default
        local accentElements = {
            NeonBorder, OuterGlow, TitleIcon, TitleLabel, IconGlow,
            MinimizedStroke, MinimizedIcon, MinimizedLabel
        }
        
        for _, element in ipairs(accentElements) do
            TweenService:Create(element, TweenInfo.new(config.animSpeed), {
                Color = colors.accent,
                ImageColor3 = colors.accent,
                TextColor3 = colors.accent
            }):Play()
        end
        
        -- Update dropdown text
        themeDropdown.Button.Text = "  Dark Purple (Default)"
        
        Notify("Appearance", "Appearance reset to default", 3, "info")
    end,
    false,
    UDim2.new(0, 0, 0, 96),
    UDim2.new(1, 0, 0, 36)
)

-- About section
local aboutCard, aboutContent = CreateCard(SettingsTab, "About", "Information about LAJ HUB.", 4)
aboutCard.Size = UDim2.new(1, -40, 0, 120)

-- Add about text
local aboutText = Create("TextLabel")({
    Name = "AboutText",
    Parent = aboutContent,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 0, 60),
    Font = Enum.Font.Gotham,
    Text = "LAJ HUB v2.0\nDeveloped by LAJ HUB Team\n© 2023 All Rights Reserved",
    TextColor3 = colors.textDim,
    TextSize = 14,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- Add discord button
local discordJoinBtn = CreateButton(
    aboutContent,
    "Join Discord",
    function()
        if setclipboard then
            setclipboard("discord.gg/lajhub")
            Notify("Discord", "Discord link copied to clipboard!", 3, "success")
        else
            Notify("Discord", "Copy to clipboard not supported", 3, "error")
        end
    end,
    true,
    UDim2.new(0, 0, 0, 70),
    UDim2.new(1, 0, 0, 36)
)

-- UI FUNCTIONALITY

-- Function to update canvas sizes
local function UpdateCanvasSizes()
    HomeTab.CanvasSize = UDim2.new(0, 0, 0, HomeLayout.AbsoluteContentSize.Y + 40)
    GamesTab.CanvasSize = UDim2.new(0, 0, 0, GamesLayout.AbsoluteContentSize.Y + 40)
    CreditsTab.CanvasSize = UDim2.new(0, 0, 0, CreditsLayout.AbsoluteContentSize.Y + 40)
    SettingsTab.CanvasSize = UDim2.new(0, 0, 0, SettingsLayout.AbsoluteContentSize.Y + 40)
end

-- Update canvas sizes when layouts change
HomeLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(UpdateCanvasSizes)
GamesLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(UpdateCanvasSizes)
CreditsLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(UpdateCanvasSizes)
SettingsLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(UpdateCanvasSizes)

-- Tab switching functionality
local tabs = {
    Home = {button = homeBtn, indicator = homeIndicator, content = HomeTab},
    Games = {button = gamesBtn, indicator = gamesIndicator, content = GamesTab},
    Credits = {button = creditsBtn, indicator = creditsIndicator, content = CreditsTab},
    Settings = {button = settingsBtn, indicator = settingsIndicator, content = SettingsTab}
}

local function SwitchTab(tabName)
    -- Hide all tabs and indicators
    for name, tab in pairs(tabs) do
        tab.content.Visible = false
        tab.indicator.Visible = false
        
        -- Reset button appearance
        if name ~= tabName then
            TweenService:Create(tab.button, TweenInfo.new(config.animSpeed), {
                BackgroundTransparency = 0.8,
                ImageColor3 = colors.textDim
            }):Play()
            
            local buttonGlow = tab.button:FindFirstChild("Glow")
            if buttonGlow then
                TweenService:Create(buttonGlow, TweenInfo.new(config.animSpeed), {
                    ImageTransparency = 1
                }):Play()
            end
        end
    end
    
    -- Show selected tab and indicator
    tabs[tabName].content.Visible = true
    tabs[tabName].indicator.Visible = true
    
    -- Highlight selected button
    TweenService:Create(tabs[tabName].button, TweenInfo.new(config.animSpeed), {
        BackgroundTransparency = 0.6,
        ImageColor3 = colors.text
    }):Play()
    
    local selectedGlow = tabs[tabName].button:FindFirstChild("Glow")
    if selectedGlow then
        TweenService:Create(selectedGlow, TweenInfo.new(config.animSpeed), {
            ImageTransparency = 0.7
        }):Play()
    end
    
    -- Update canvas sizes
    UpdateCanvasSizes()
}

-- Set up tab button click handlers
homeBtn.MouseButton1Click:Connect(function()
    SwitchTab("Home")
end)

gamesBtn.MouseButton1Click:Connect(function()
    SwitchTab("Games")
end)

creditsBtn.MouseButton1Click:Connect(function()
    SwitchTab("Credits")
end)

settingsBtn.MouseButton1Click:Connect(function()
    SwitchTab("Settings")
end)

-- Game search functionality
searchBar:GetPropertyChangedSignal("Text"):Connect(function()
    local searchText = string.lower(searchBar.Text)
    
    for _, child in pairs(GamesTab:GetChildren()) do
        if child:IsA("Frame") and child.Name:match("Button$") then
            local title = child:FindFirstChild("Title")
            local desc = child:FindFirstChild("Description")
            
            if title and desc then
                local titleText = string.lower(title.Text)
                local descText = string.lower(desc.Text)
                
                -- Show/hide based on search
                if searchText == "" or titleText:find(searchText) or descText:find(searchText) then
                    child.Visible = true
                else
                    child.Visible = false
                end
            end
        end
    end
    
    -- Update canvas size
    UpdateCanvasSizes()
end)

-- Minimize/maximize functionality
MinimizeButton.MouseButton1Click:Connect(function()
    -- Hide main frame with animation
    TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
        Position = UDim2.new(0.5, 0, 0.5, 0),
        Size = UDim2.new(0, 0, 0, 0)
    }):Play()
    
    wait(0.5)
    MainFrame.Visible = false
    
    -- Show minimized button with animation
    MinimizedButton.Visible = true
    MinimizedButton.Position = UDim2.new(0, -150, 0, 20)
    MinimizedButton.Size = UDim2.new(0, 150, 0, 40)
    
    TweenService:Create(MinimizedButton, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Position = UDim2.new(0, 20, 0, 20)
    }):Play()
    
    -- Enhance the glow
    TweenService:Create(MinimizedGlow, TweenInfo.new(0.5), {
        ImageTransparency = 0.6
    }):Play()
})

-- Make Minimized button click restore UI
MinimizedButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        -- Fade out minimized button
        TweenService:Create(MinimizedButton, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
            Position = UDim2.new(0, -150, 0, 20),
            ImageTransparency = 1
        }):Play()
        
        TweenService:Create(MinimizedGlow, TweenInfo.new(0.3), {
            ImageTransparency = 1
        }):Play()
        
        wait(0.3)
        MinimizedButton.Visible = false
        
        -- Show main frame with animation
        MainFrame.Visible = true
        MainFrame.Size = UDim2.new(0, 0, 0, 0)
        MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
        
        TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
            Size = UDim2.new(0, config.frameWidth, 0, config.frameHeight),
            Position = UDim2.new(0.5, -config.frameWidth/2, 0.5, -config.frameHeight/2)
        }):Play()
    end
end)

-- Make minimized button draggable
local dragStart, startPos
local dragging = false

MinimizedButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MinimizedButton.Position
    end
end)

MinimizedButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        MinimizedButton.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

-- Close button functionality
CloseButton.MouseButton1Click:Connect(function()
    -- Fade out with animation
    TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
        Size = UDim2.new(0, 0, 0, 0),
        Position = UDim2.new(0.5, 0, 0.5, 0)
    }):Play()
    
    wait(0.5)
    LAJHub:Destroy()
end)

-- Initialize UI
UpdateCanvasSizes()

-- Show welcome notification
Notify("LAJ HUB", "Welcome to LAJ HUB Modern! Select a script to begin.", 4, "default")

-- Auto-detect game on load
local function AutoDetectGame()
    local gameId = game.PlaceId
    local gameName = string.lower(game.Name)
    
    for _, script in ipairs(gameScripts) do
        local lowerName = string.lower(script.game)
        if string.find(gameName, lowerName) then
            -- Update status text
            statusText.Text = "Detected: " .. script.game
            
            -- Auto-load if enabled
            if autoLoadEnabled then
                delay(1, function()
                    pcall(function()
                        loadstring(game:HttpGet(script.url, true))()
                    end)
                    
                    Notify(script.game, "Script loaded successfully!", 3, "success")
                end)
            else
                Notify("Game Detected", "Found compatible game: " .. script.game, 3, "info")
            end
            
            return true
        end
    end
    
    return false
}

-- Try to auto-detect game
if not AutoDetectGame() then
    statusText.Text = "Ready to use"
end

-- Return the hub for later reference
return LAJHub
